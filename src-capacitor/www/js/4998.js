"use strict";(globalThis["webpackChunkvnm_static_h5"]=globalThis["webpackChunkvnm_static_h5"]||[]).push([[4998],{84998:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ie});var o=t(61758),a=t(58790),l=t(29104),r=t(25817),i=t.n(r),c=t(60668),d=t.n(c),s=t(50378),u=t.n(s),p=t(63765),m=t.n(p),g={key:0,class:"fgtpwd-tabs-div"},f={class:"forgetpass-board q-gutter-y-md"},h=(0,o.Lk)("em",null,"*",-1),_=(0,o.Lk)("img",{src:i(),width:"24"},null,-1),w=(0,o.Lk)("em",null,"*",-1),b=(0,o.Lk)("div",{style:{width:"24px",display:"flex","align-items":"center"}},[(0,o.Lk)("img",{src:d(),width:"18"})],-1),v=(0,o.Lk)("em",null,"*",-1),k=["src"],F=(0,o.Lk)("img",{src:u(),width:"24"},null,-1),y={class:"row justify-between items-center"},C=(0,o.Lk)("em",null,"*",-1),$=(0,o.Lk)("img",{src:i(),width:"24"},null,-1),V=(0,o.Lk)("em",null,"*",-1),L=(0,o.Lk)("div",{style:{width:"24px",display:"flex","align-items":"center"}},[(0,o.Lk)("img",{src:m(),width:"27"})],-1),P=(0,o.Lk)("em",null,"*",-1),E=["src"],I=(0,o.Lk)("img",{src:u(),width:"24"},null,-1),R={class:"row justify-between items-center"},A=(0,o.Lk)("em",null,"*",-1),S=(0,o.Lk)("div",{style:{width:"24px",display:"flex","align-items":"center"}},[(0,o.Lk)("img",{src:m(),width:"27"})],-1),x=(0,o.Lk)("em",null,"*",-1),K=["src"],T=(0,o.Lk)("img",{src:u(),width:"24"},null,-1),Q={class:"row justify-between items-center"},q={key:1,class:"text-blue q-px-md"},U={key:0,class:"password-str-div"},W=["src"],N={class:"row justify-between items-center"};function X(e,n,t,r,i,c){var d=(0,o.g2)("q-label"),s=(0,o.g2)("q-input"),u=(0,o.g2)("q-btn"),p=(0,o.g2)("q-form"),m=(0,o.g2)("q-icon"),X=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(X,{class:""},{default:(0,o.k6)((function(){return[e.isEmailSent?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",g,[(0,o.Lk)("div",{class:(0,a.C4)(["fgtpwd-item","tabSms"===e.fgtpwdTab?"is-active":""]),onClick:n[0]||(n[0]=function(n){return e.goToTab("tabSms")})},[(0,o.Lk)("span",null,(0,a.v_)(e.$t("lang.recover_password_by_phone_number")),1)],2),(0,o.Lk)("div",{class:(0,a.C4)(["fgtpwd-item","tabEmail"===e.fgtpwdTab?"is-active":""]),onClick:n[1]||(n[1]=function(n){return e.goToTab("tabEmail")})},[(0,o.Lk)("span",null,(0,a.v_)(e.$t("lang.recover_password_by_email")),1)],2),(0,o.Lk)("div",{class:(0,a.C4)(["fgtpwd-item","tabAcc"===e.fgtpwdTab?"is-active":""]),onClick:n[2]||(n[2]=function(n){return e.goToTab("tabAcc")})},[(0,o.Lk)("span",null,(0,a.v_)(e.$t("lang.recover_account_by_email")),1)],2)])),(0,o.Lk)("div",f,[e.isEmailSent?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(p,{key:0,class:"q-mt-xs"},{default:(0,o.k6)((function(){return["tabSms"===e.fgtpwdTab?((0,o.uX)(),(0,o.CE)(o.FK,{key:0},[(0,o.bF)(d,null,{default:(0,o.k6)((function(){return[(0,o.eW)((0,a.v_)(e.$t("lang.username"))+" ",1),h]})),_:1}),(0,o.bF)(s,{rounded:"",standout:"",clearable:"",modelValue:e.passwordFormPhone.loginName,"onUpdate:modelValue":n[3]||(n[3]=function(n){return e.passwordFormPhone.loginName=n}),placeholder:e.$t("lang.username"),rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_username")}],color:"white","label-color":"secondary",autocomplete:"username"},{prepend:(0,o.k6)((function(){return[_]})),_:1},8,["modelValue","placeholder","rules"]),(0,o.bF)(d,null,{default:(0,o.k6)((function(){return[(0,o.eW)((0,a.v_)(e.$t("lang.phone_number"))+" ",1),w]})),_:1}),(0,o.bF)(s,{rounded:"",standout:"",clearable:"",modelValue:e.passwordFormPhone.phone,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.passwordFormPhone.phone=n}),placeholder:e.$t("lang.phone_number"),rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_phone_number")},function(n){return e.isValidVnmPhone(n)}],color:"white","label-color":"secondary",autocomplete:"username",type:"number"},{prepend:(0,o.k6)((function(){return[b]})),_:1},8,["modelValue","placeholder","rules"]),(0,o.bF)(d,null,{default:(0,o.k6)((function(){return[(0,o.eW)((0,a.v_)(e.$t("lang.verification_code"))+" ",1),v]})),_:1}),(0,o.bF)(s,{ref:"ftCaptchaRef",rounded:"",standout:"",clearable:"",type:"text",maxlength:"4",modelValue:e.passwordFormPhone.captchaCode,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.passwordFormPhone.captchaCode=n}),placeholder:e.$t("lang.verification_code"),rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_verification_code")},function(n){return n&&n.length>3&&n.length<5||e.$t("lang.length_is_4")}],color:"white","label-color":"brand"},{append:(0,o.k6)((function(){return[(0,o.Lk)("img",{class:"veri-img",src:e.verificationImg,onClick:n[5]||(n[5]=function(){return e.getCode&&e.getCode.apply(e,arguments)})},null,8,k)]})),prepend:(0,o.k6)((function(){return[F]})),_:1},8,["modelValue","placeholder","rules"]),(0,o.Lk)("div",y,[(0,o.bF)(u,{onClick:n[7]||(n[7]=(0,l.D$)((function(n){return e.onSubmitForgotPwd("phone")}),["prevent"])),class:"common-large-btn",label:e.$t("lang.change_password_btn"),width:"100%",color:"brightbtn","no-caps":"",style:{width:"100%"}},null,8,["label"])])],64)):(0,o.Q3)("",!0),"tabEmail"===e.fgtpwdTab?((0,o.uX)(),(0,o.CE)(o.FK,{key:1},[(0,o.bF)(d,null,{default:(0,o.k6)((function(){return[(0,o.eW)((0,a.v_)(e.$t("lang.username"))+" ",1),C]})),_:1}),(0,o.bF)(s,{rounded:"",standout:"",clearable:"",modelValue:e.passwordFormEmail.loginName,"onUpdate:modelValue":n[8]||(n[8]=function(n){return e.passwordFormEmail.loginName=n}),placeholder:e.$t("lang.username"),rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_username")}],color:"white","label-color":"secondary",autocomplete:"username"},{prepend:(0,o.k6)((function(){return[$]})),_:1},8,["modelValue","placeholder","rules"]),(0,o.bF)(d,null,{default:(0,o.k6)((function(){return[(0,o.eW)((0,a.v_)(e.$t("lang.email"))+" ",1),V]})),_:1}),(0,o.bF)(s,{rounded:"",standout:"",clearable:"",modelValue:e.passwordFormEmail.email,"onUpdate:modelValue":n[9]||(n[9]=function(n){return e.passwordFormEmail.email=n}),placeholder:e.$t("lang.email"),rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_email")},e.isValidEmail],color:"white","label-color":"secondary",autocomplete:"username"},{prepend:(0,o.k6)((function(){return[L]})),_:1},8,["modelValue","placeholder","rules"]),(0,o.bF)(d,null,{default:(0,o.k6)((function(){return[(0,o.eW)((0,a.v_)(e.$t("lang.verification_code"))+" ",1),P]})),_:1}),(0,o.bF)(s,{ref:"ftCaptchaRef",rounded:"",standout:"",clearable:"",type:"text",maxlength:"4",modelValue:e.passwordFormEmail.captchaCode,"onUpdate:modelValue":n[11]||(n[11]=function(n){return e.passwordFormEmail.captchaCode=n}),placeholder:e.$t("lang.verification_code"),rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_verification_code")},function(n){return n&&n.length>3&&n.length<5||e.$t("lang.length_is_4")}],color:"white","label-color":"brand"},{append:(0,o.k6)((function(){return[(0,o.Lk)("img",{class:"veri-img",src:e.verificationImg,onClick:n[10]||(n[10]=function(){return e.getCode&&e.getCode.apply(e,arguments)})},null,8,E)]})),prepend:(0,o.k6)((function(){return[I]})),_:1},8,["modelValue","placeholder","rules"]),(0,o.Lk)("div",R,[(0,o.bF)(u,{onClick:n[12]||(n[12]=(0,l.D$)((function(n){return e.onSubmitForgotPwd("email")}),["prevent"])),class:"common-large-btn",label:e.$t("lang.change_password_btn"),"no-caps":"",width:"100%",color:"brightbtn",style:{width:"100%"}},null,8,["label"])])],64)):(0,o.Q3)("",!0),"tabAcc"===e.fgtpwdTab?((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[(0,o.bF)(d,null,{default:(0,o.k6)((function(){return[(0,o.eW)((0,a.v_)(e.$t("lang.email"))+" ",1),A]})),_:1}),(0,o.bF)(s,{rounded:"",standout:"",clearable:"",modelValue:e.passwordFormEmail.email,"onUpdate:modelValue":n[13]||(n[13]=function(n){return e.passwordFormEmail.email=n}),placeholder:e.$t("lang.email"),rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_email")},e.isValidEmail],color:"white","label-color":"secondary"},{prepend:(0,o.k6)((function(){return[S]})),_:1},8,["modelValue","placeholder","rules"]),(0,o.bF)(d,null,{default:(0,o.k6)((function(){return[(0,o.eW)((0,a.v_)(e.$t("lang.verification_code"))+" ",1),x]})),_:1}),(0,o.bF)(s,{ref:"ftCaptchaRef",rounded:"",standout:"",clearable:"",type:"text",maxlength:"4",modelValue:e.passwordFormEmail.captchaCode,"onUpdate:modelValue":n[15]||(n[15]=function(n){return e.passwordFormEmail.captchaCode=n}),placeholder:e.$t("lang.verification_code"),rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_verification_code")},function(n){return n&&n.length>3&&n.length<5||e.$t("lang.length_is_4")}],color:"white","label-color":"brand"},{append:(0,o.k6)((function(){return[(0,o.Lk)("img",{class:"veri-img",src:e.verificationImg,onClick:n[14]||(n[14]=function(){return e.getCode&&e.getCode.apply(e,arguments)})},null,8,K)]})),prepend:(0,o.k6)((function(){return[T]})),_:1},8,["modelValue","placeholder","rules"]),(0,o.Lk)("div",Q,[(0,o.bF)(u,{onClick:n[16]||(n[16]=(0,l.D$)((function(n){return e.onSubmitForgotPwd("acc")}),["prevent"])),class:"common-large-btn",label:e.$t("lang.change_password_btn"),"no-caps":"",width:"100%",color:"brightbtn",style:{width:"100%"}},null,8,["label"])])],64)):(0,o.Q3)("",!0)]})),_:1})),e.isEmailSent?((0,o.uX)(),(0,o.CE)("div",q,(0,a.v_)(e.$t("lang.email_sent_txt")),1)):(0,o.Q3)("",!0),e.isEmailSent?((0,o.uX)(),(0,o.Wv)(p,{key:2,class:"q-gutter-y-md rounded-borders"},{default:(0,o.k6)((function(){return[(0,o.bF)(s,{ref:"codeRef",filled:"","hide-bottom-space":"",modelValue:e.verificationForm.code,"onUpdate:modelValue":n[17]||(n[17]=function(n){return e.verificationForm.code=n}),label:e.$t("lang.otp_code"),"lazy-rules":"",clearable:"",rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_otp")}]},{prepend:(0,o.k6)((function(){return[(0,o.bF)(m,{name:"qr_code"})]})),_:1},8,["modelValue","label","rules"]),(0,o.bF)(s,{ref:"newPwdRef",type:e.isPwd?"password":"text",filled:"","hide-bottom-space":"",modelValue:e.verificationForm.newPassword,"onUpdate:modelValue":n[19]||(n[19]=function(n){return e.verificationForm.newPassword=n}),label:e.$t("lang.new_password"),clearable:"","lazy-rules":"",rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_new_password")},function(n){return n.length>5&&n.length<=12||e.$t("lang.password_length_is_6_to_12")},function(n){return n&&("normal"==e.pwdStrength||"strong"==e.pwdStrength)||e.$t("lang.password_security_level_must_be_at_least_good")}]},{prepend:(0,o.k6)((function(){return[(0,o.bF)(m,{name:"lock_open"})]})),append:(0,o.k6)((function(){return[(0,o.bF)(m,{color:"bright",name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:n[18]||(n[18]=function(n){return e.isPwd=!e.isPwd})},null,8,["name"])]})),_:1},8,["type","modelValue","label","rules"]),e.verificationForm.newPassword?((0,o.uX)(),(0,o.CE)("div",U,[(0,o.Lk)("span",{class:(0,a.C4)({"weak-pwd":"weak"==e.pwdStrength,"normal-pwd":"normal"==e.pwdStrength,"strong-pwd":"strong"==e.pwdStrength})},(0,a.v_)(e.$t("lang.password_weak")),3),(0,o.Lk)("span",{class:(0,a.C4)({"normal-pwd":"normal"==e.pwdStrength,"strong-pwd":"strong"==e.pwdStrength})},(0,a.v_)(e.$t("lang.password_good")),3),(0,o.Lk)("span",{class:(0,a.C4)({"strong-pwd":"strong"==e.pwdStrength})},(0,a.v_)(e.$t("lang.password_strong")),3)])):(0,o.Q3)("",!0),(0,o.bF)(s,{ref:"captchaRef",filled:"","hide-bottom-space":"",type:"text",modelValue:e.verificationForm.captchaCode,"onUpdate:modelValue":n[21]||(n[21]=function(n){return e.verificationForm.captchaCode=n}),label:e.$t("lang.verification_code"),"lazy-rules":"",rules:[function(n){return n&&n.length>3||e.$t("lang.please_enter_verification_code")}]},{append:(0,o.k6)((function(){return[(0,o.Lk)("img",{src:e.verificationImg,onClick:n[20]||(n[20]=function(n){return e.getCode()})},null,8,W)]})),prepend:(0,o.k6)((function(){return[(0,o.bF)(m,{name:"security"})]})),_:1},8,["modelValue","label","rules"]),(0,o.Lk)("div",N,[(0,o.bF)(u,{onClick:(0,l.D$)(e.onVerifyForgotPassword,["prevent"]),label:e.$t("lang.change_password_btn"),"no-caps":"",width:"100%",class:"common-large-btn",color:"brightbtn",style:{width:"100%"}},null,8,["onClick","label"])])]})),_:1})):(0,o.Q3)("",!0)])]})),_:1})}t(10239);var z=t(38734),j=t(88122),D=t(43710),Z=t(60455),B=t(80875),M=t(23537);const G=(0,o.pM)({name:"LoginPage",setup:function(){(0,o.n)((function(){c(),k.value=!1}));var e=(0,M.s9)(),n=e.t,a=(0,z.KR)(""),l=(0,z.Kh)({codeId:"",loginName:"",phone:"",captchaCode:""}),r=(0,z.Kh)({codeId:"",loginName:"",email:"",captchaCode:""}),i=(0,z.Kh)({email:null,phone:null,code:"",codeId:B.A.getItem("emailCodeId"),newPassword:""}),c=function(){j.api.get("/member/verificationCode").then((function(e){0===e.code&&(a.value="data:image/png;base64,"+e.data.img,r.codeId=e.data.id,r.captchaCode="",l.codeId=e.data.id,l.captchaCode="",u.value.resetValidation())}))["catch"]((function(e){}))},d=(0,z.KR)(),s=(0,z.KR)(),u=(0,z.KR)(),p=(0,z.KR)(),m=(0,z.KR)(),g=(0,z.KR)(),f=(0,D.A)(),h=(0,z.KR)(""),_=function(){var e=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return e.test(r.email)||n("lang.email_valid")},w=function(e){var t=/^0\d{9}$/;return t.test(e)||n("lang.phone_not_valid")},b=t(54760),v=((0,Z.lq)(),(0,Z.rd)()),k=(0,z.KR)(!1),F=((0,z.KR)(!1),function(e){"email"===e?(f.loading.show({message:n("lang.verification_code_sending")}),j.api.post("/otp/sendForgetPasswordEmail",b.stringify(r)).then((function(e){0===e.code&&(k.value=!0,B.A.set("emailCodeId",e.data.codeId)),f.loading.hide(),f.notify({color:"positive",position:"top",message:"请输入新密码",icon:"check_circle_outline"})}))["catch"]((function(e){f.loading.hide()})),c()):"phone"===e?(f.loading.show({message:n("lang.verification_code_sending")}),j.api.post("/otp/sendForgetPasswordPhone",b.stringify(l)).then((function(e){0===e.code&&(k.value=!0,B.A.set("phoneCodeId",e.data.codeId)),f.loading.hide(),f.notify({color:"positive",position:"top",message:"请输入新密码",icon:"check_circle_outline"})}))["catch"]((function(e){f.loading.hide()})),c()):"acc"===e&&(f.loading.show({message:n("lang.verification_code_sending")}),j.api.post("/otp/findAccount",b.stringify(r)).then((function(e){0===e.code&&(r.email="",f.notify({color:"positive",position:"top",message:n("lang.account_sent_to_email"),icon:"check_circle_outline"})),f.loading.hide()}))["catch"]((function(e){f.loading.hide()})),c())}),y=function(){p.value.validate(),m.value.validate(),g.value.validate(),f.loading.show({message:"提交中..."}),p.value.hasError||m.value.hasError||g.value.hasError?f.loading.hide():("tabEmail"==C.value&&(i.codeId=B.A.getItem("emailCodeId"),i.email=r.email,j.api.post("/otp/verifyForgetPasswordEmail",b.stringify(i)).then((function(e){0===e.code&&(f.notify({color:"positive",position:"top",message:"密码修改成功",icon:"check_circle_outline"}),v.push("/login")),f.loading.hide()}))["catch"]((function(e){f.loading.hide()})),c()),"tabSms"==C.value&&(i.codeId=B.A.getItem("phoneCodeId"),i.phone=l.phone,j.api.post("/otp/verifyForgetPasswordPhone",b.stringify(i)).then((function(e){0===e.code&&(f.notify({color:"positive",position:"top",message:n("lang.password_reset_complete"),icon:"check_circle_outline"}),v.push("/login")),f.loading.hide()}))["catch"]((function(e){f.loading.hide()})),c()))},C=(0,z.KR)("tabSms"),$=function(e){c(),l.codeId="",l.loginName="",l.phone="",l.captchaCode="",r.codeId="",r.loginName="",r.email="",r.captchaCode="",C.value=e};return(0,o.wB)((function(){return i.newPassword}),(function(){h.value="";for(var e=i.newPassword,n=0,t=0,o=e.length;t<o;++t)n|=H(e.charCodeAt(t));var a=0;for(t=0;t<=4;t++)1&n&&a++,n>>>=1;if(e.length>=6)switch(a){case 1:h.value="weak";break;case 2:h.value="normal";break;case 3:case 4:h.value="strong";break}else h.value="weak"})),{header:"Forgot Account & Password",passwordFormPhone:l,passwordFormEmail:r,verificationForm:i,verificationImg:a,getCode:c,isValidEmail:_,isValidVnmPhone:w,isEmailSent:k,onSubmitForgotPwd:F,onVerifyForgotPassword:y,loginNameRef:d,emailRef:s,ftCaptchaRef:u,codeRef:p,newPwdRef:m,captchaRef:g,isPwd:(0,z.KR)(!0),pwdStrength:h,fgtpwdTab:C,goToTab:$}}});function H(e){return e>=48&&e<=57?1:e>=97&&e<=122?2:e>=65&&e<=90?4:8}var J=t(12807),O=t(33177),Y=t(21565),ee=t(68926),ne=t(69001),te=t(24609),oe=t(51225),ae=t(98582),le=t.n(ae);const re=(0,J.A)(G,[["render",X]]),ie=re;le()(G,"components",{QPage:O.A,QForm:Y.A,QInput:ee.A,QBtn:ne.A,QIcon:te.A,QField:oe.A})}}]);