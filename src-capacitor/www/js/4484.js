"use strict";(globalThis["webpackChunkvnm_static_h5"]=globalThis["webpackChunkvnm_static_h5"]||[]).push([[4484],{39786:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ee});t(10239);var a=t(61758),o=t(58790),l=t(38734),u=t(46625),i=t.n(u),r=t(53717),c=t.n(r),s=t(15868),d=t(31714),f=t(88122),m=t(43710),p=t(33958),v=t(92246),b=t.n(v),g=t(23537),k=function(e){return(0,a.Qi)("data-v-7cdd192d"),e=e(),(0,a.jt)(),e},_={class:"account-tabs-div"},h={class:"account-item is-active"},w={class:"account-item"},y={class:"account-item"},F={class:"transfer-mid-div"},L=k((function(){return(0,a.Lk)("div",{class:"volume"},[(0,a.Lk)("img",{src:i()})],-1)})),C={key:0},x={key:0,class:"transfer-tab-section q-pa-md q-mx-sm q-my-md"},A={class:"transferfromto q-mb-md"},q=["src"],E=k((function(){return(0,a.Lk)("div",{class:"icon"},[(0,a.Lk)("img",{src:c()})],-1)})),K=["src"],R={class:"transferamounts q-my-md"},Q=["onClick"],T={class:"transfer-amt-div"},V={style:{"font-size":"1.5rem",color:"#000"}},I={class:"headers"},S={class:"titles"};const X={__name:"TransferView",setup:function(e){d.A;var n=(0,s.Z)(),u=(0,m.A)(),i=(0,g.s9)(),r=i.t,c=(0,l.KR)("main"),v=(0,l.KR)(""),k=(0,l.Kh)([]),X=(0,l.KR)(),$=(0,l.KR)(),B=(0,l.KR)([r("lang.transfer_announcement")]),P=(0,l.KR)({amount:0}),U=function(){0===P.value.amount&&(P.value.amount="")},W=t(54760),N=(0,l.KR)([]),M=(0,l.KR)([]),j=function(){"main"!==c.value?(M.value=[{id:"main",value:"中心钱包",label:r("lang.acct_mainaccount"),code:"main",type:"main"}],v.value="main"):(N.value=[{id:"main",value:"中心钱包",label:r("lang.acct_mainaccount"),code:"main",type:"main"}],M.value=[],k.forEach((function(e){var n={id:e.id,label:e.name,code:e.code,type:e.type};M.value.push(n),N.value.push(n)})),console.log(N.value),v.value&&"main"!==v.value||(v.value=k[0].id))},z=(0,l.KR)(!1),D=(0,l.KR)(!1),J=function(){D.value=!0},O=function(){X.value.validate(),X.value.hasError||(z.value=!0,P.value.amount>0?"main"===c.value?k.forEach((function(e){if(e.id===v.value&&e.code){var t={name:e.name,platform:e.code,amount:P.value.amount};f.api.post("/session/balance/transfer/deposit",W.stringify(t)).then((function(t){0===t.code&&setTimeout((function(){u.notify({color:"positive",position:"top",message:"成功",icon:"check_circle_outline"}),H(e.code),n.getBalance(),P.value.amount=null,$.value.reset(),z.value=!1}),1e3)}))["catch"]((function(e){z.value=!1}))}})):k.forEach((function(e){if(e.id===c.value&&e.code){var t={platform:e.code,amount:P.value.amount};f.api.post("/session/balance/transfer/withdraw",W.stringify(t)).then((function(t){0===t.code&&setTimeout((function(){u.notify({color:"positive",position:"top",message:"转账成功",icon:"check_circle_outline"}),H(e.code),n.getBalance(),P.value.amount=0,z.value=!1}),1e3)}))["catch"]((function(e){z.value=!1}))}})):z.value=!1)},Z=function(){P.value.amount=JSON.stringify(Math.floor(n.balance)),k.forEach((function(e){c.value===e.id&&(P.value.amount=e.amount)}))},G=function(){f.api.get("/session/loggedInPlatform").then((function(e){e.data.forEach((function(e){"SEAMLESS"!==e.walletType&&(k.push({id:e.id,code:e.code,name:(0,p.o)(e.name),type:e.gameType,amount:0}),H(e.code))})),j()}))},H=function(e){var n=k.find((function(n){return n.code===e}));f.api.get("/session/balance",{params:{platform:e}}).then((function(e){n&&(n.amount=e.data.toFixed(2))}))["catch"]((function(e){n.isLoading=!1}))},Y=[100,500,1e3,2e3,5e3],ee=(0,l.KR)(!1),ne=function(){f.api.get("/session/getAutoTransferState",{}).then((function(e){ee.value=e.data}))},te=function(e){f.api.put("/session/updateAutoTransferState/".concat(e),{}).then((function(e){ee.value=e.data}))};return(0,a.sV)((function(){n.getBalance(),G(),ne()})),function(e,u){var i=(0,a.g2)("router-link"),r=(0,a.g2)("q-item-label"),s=(0,a.g2)("q-item-section"),f=(0,a.g2)("q-item"),m=(0,a.g2)("q-select"),p=(0,a.g2)("q-input"),g=(0,a.g2)("q-btn"),W=(0,a.g2)("q-form"),G=(0,a.g2)("q-page"),H=(0,a.g2)("q-card"),ne=(0,a.g2)("q-dialog");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(G,{class:"transfer-container"},{default:(0,a.k6)((function(){return[(0,a.Lk)("div",_,[(0,a.Lk)("div",h,[(0,a.Lk)("span",null,(0,o.v_)(e.$t("lang.transfer_transfer")),1)]),(0,a.bF)(i,{to:"/finance/deposit?redirect=account/transfer"},{default:(0,a.k6)((function(){return[(0,a.Lk)("div",w,[(0,a.Lk)("span",null,(0,o.v_)(e.$t("lang.transfer_deposit")),1)])]})),_:1}),(0,a.bF)(i,{to:"/finance/withdraw?redirect=account/transfer"},{default:(0,a.k6)((function(){return[(0,a.Lk)("div",y,[(0,a.Lk)("span",null,(0,o.v_)(e.$t("lang.transfer_withdraw")),1)])]})),_:1})]),(0,a.Lk)("div",F,[(0,a.Lk)("div",{class:"station-notice-wrapper",onClick:J},[L,(0,a.bF)((0,l.R1)(b()),{repeat:5,duration:10*B.value.length},{default:(0,a.k6)((function(){return[B.value?((0,a.uX)(),(0,a.CE)("div",C,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(B.value,(function(e,n){return(0,a.uX)(),(0,a.CE)("span",{key:n},(0,o.v_)(e),1)})),128))])):(0,a.Q3)("",!0)]})),_:1},8,["duration"])])]),(0,a.bF)(d.A,{isTransfer:ee.value,platforms:k,updateAutoTransfer:te},null,8,["isTransfer","platforms"]),ee.value?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",x,[(0,a.bF)(W,{ref_key:"transferFormRef",ref:$},{default:(0,a.k6)((function(){return[(0,a.Lk)("div",A,[(0,a.bF)(m,{ref_key:"transferFormRef",ref:$,class:"q-mb-md",filled:"","label-color":"grey",modelValue:c.value,"onUpdate:modelValue":[u[0]||(u[0]=function(e){return c.value=e}),j],options:N.value,"option-value":"id","option-label":"label","emit-value":"","map-options":""},{"selected-item":(0,a.k6)((function(e){return[(0,a.bF)(s,null,{default:(0,a.k6)((function(){return[(0,a.bF)(r,{style:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},{default:(0,a.k6)((function(){return[(0,a.eW)((0,o.v_)(e.opt.label),1)]})),_:2},1024)]})),_:2},1024)]})),option:(0,a.k6)((function(e){return[(0,a.bF)(f,(0,o._B)((0,a.Ng)(e.itemProps)),{default:(0,a.k6)((function(){return[(0,a.bF)(s,{avatar:""},{default:(0,a.k6)((function(){var n;return[(0,a.Lk)("img",{src:t(20344)("./".concat(e.opt.type.toLowerCase(),"/logo-").concat(e.opt.code.toLowerCase(),".png")),style:(0,o.Tr)("main"===(null===e||void 0===e||null===(n=e.opt)||void 0===n?void 0:n.type)?"width: 15px; margin: 10px 10px 10px 5px;":"width: 30px; margin-top: 10px; margin-bottom: 10px;")},null,12,q)]})),_:2},1024),(0,a.bF)(s,null,{default:(0,a.k6)((function(){return[(0,a.bF)(r,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,o.v_)(e.opt.label),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1040)]})),_:1},8,["modelValue","options"]),E,(0,a.bF)(m,{class:"q-mb-md",filled:"","label-color":"grey",modelValue:v.value,"onUpdate:modelValue":[u[1]||(u[1]=function(e){return v.value=e}),j],options:M.value,"option-value":"id","option-label":"label","emit-value":"","map-options":""},{"selected-item":(0,a.k6)((function(e){return[(0,a.bF)(s,null,{default:(0,a.k6)((function(){return[(0,a.bF)(r,{style:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},{default:(0,a.k6)((function(){return[(0,a.eW)((0,o.v_)(e.opt.label),1)]})),_:2},1024)]})),_:2},1024)]})),option:(0,a.k6)((function(e){return[(0,a.bF)(f,(0,o._B)((0,a.Ng)(e.itemProps)),{default:(0,a.k6)((function(){return[(0,a.bF)(s,{avatar:""},{default:(0,a.k6)((function(){return[(0,a.Lk)("img",{src:t(20344)("./".concat(e.opt.type.toLowerCase(),"/logo-").concat(e.opt.code.toLowerCase(),".png")),style:(0,o.Tr)("main"===e.opt.type?"width: 15px; margin: 10px 10px 10px 5px;":"width: 30px; margin-top: 10px; margin-bottom: 10px;")},null,12,K)]})),_:2},1024),(0,a.bF)(s,null,{default:(0,a.k6)((function(){return[(0,a.bF)(r,null,{default:(0,a.k6)((function(){return[(0,a.eW)((0,o.v_)(e.opt.label),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1040)]})),_:1},8,["modelValue","options"])]),(0,a.Lk)("div",R,[((0,a.uX)(),(0,a.CE)(a.FK,null,(0,a.pI)(Y,(function(e,n){return(0,a.Lk)("div",{key:n,class:(0,o.C4)(["val common-sm-white-btn",P.value.amount==e?"common-sm-btn":""]),onClick:function(n){return P.value.amount=e}},(0,o.v_)(e),11,Q)})),64))]),(0,a.Lk)("div",T,[(0,a.bF)(p,{"hide-bottom-space":"",ref_key:"amountRef",ref:X,modelValue:P.value.amount,"onUpdate:modelValue":u[2]||(u[2]=function(e){return P.value.amount=e}),placeholder:e.$t("lang.enter_transfer_amount"),clearable:"",class:"transfer-amt-input",color:"white",rules:[function(n){return!!n||e.$t("lang.enter_transfer_amount")}],onClick:U},{prepend:(0,a.k6)((function(){return[(0,a.Lk)("span",V,(0,o.v_)((0,l.R1)(n).currency.value),1)]})),_:1},8,["modelValue","placeholder","rules"]),(0,a.bF)(g,{class:"common-md-white-btn",style:{"white-space":"nowrap"},label:e.$t("lang.acct_maxamount"),"no-caps":"",onClick:Z},null,8,["label"])]),(0,a.bF)(g,{style:{width:"100%"},class:"transfer-btn common-large-btn",color:"brightbtn",onClick:O,"no-caps":"",label:e.$t("lang.acct_transfernow"),loading:z.value},null,8,["label","loading"])]})),_:1},512)]))]})),_:1}),(0,a.bF)(ne,{width:"100%",class:"modal-common-div",modelValue:D.value,"onUpdate:modelValue":u[3]||(u[3]=function(e){return D.value=e}),"full-width":""},{default:(0,a.k6)((function(){return[(0,a.bF)(H,{class:"q-pa-md modal-content"},{default:(0,a.k6)((function(){return[(0,a.Lk)("div",I,[(0,a.Lk)("div",S,(0,o.v_)(e.$t("lang.transfer_announcementhead")),1)]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(B.value,(function(e,n){return(0,a.uX)(),(0,a.CE)("div",{class:"contents",key:n},(0,o.v_)(e),1)})),128))]})),_:1})]})),_:1},8,["modelValue"])],64)}}};var $=t(12807),B=t(33177),P=t(21565),U=t(833),W=t(63418),N=t(35779),M=t(75329),j=t(68926),z=t(69001),D=t(57201),J=t(97569),O=t(51225),Z=t(79197),G=t(98582),H=t.n(G);const Y=(0,$.A)(X,[["__scopeId","data-v-7cdd192d"]]),ee=Y;H()(X,"components",{QPage:B.A,QForm:P.A,QSelect:U.A,QItemSection:W.A,QItemLabel:N.A,QItem:M.A,QInput:j.A,QBtn:z.A,QDialog:D.A,QCard:J.A,QField:O.A}),H()(X,"directives",{ClosePopup:Z.A})}}]);