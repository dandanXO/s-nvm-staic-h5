"use strict";(globalThis["webpackChunkvnm_static_h5"]=globalThis["webpackChunkvnm_static_h5"]||[]).push([[6540],{36540:(e,o,n)=>{n.r(o),n.d(o,{default:()=>D});var t=n(61758),a=n(58790),r=function(e){return(0,t.Qi)("data-v-f31d8e98"),e=e(),(0,t.jt)(),e},s={class:"chgpwd-tabs-div"},l={class:"change-pwd"},d=r((function(){return(0,t.Lk)("em",null,"*",-1)})),i=r((function(){return(0,t.Lk)("em",null,"*",-1)})),c=r((function(){return(0,t.Lk)("em",null,"*",-1)})),u={class:"box-width"},w={class:"change-pwd"},p=r((function(){return(0,t.Lk)("em",null,"*",-1)})),f=r((function(){return(0,t.Lk)("em",null,"*",-1)})),g=r((function(){return(0,t.Lk)("em",null,"*",-1)})),h=r((function(){return(0,t.Lk)("em",null,"*",-1)})),_={class:"box-width"},m={class:"q-px-lg q-pt-sm q-pb-lg"},b=["src","title"];function P(e,o,n,r,P,v){var k=(0,t.g2)("q-label"),C=(0,t.g2)("q-icon"),y=(0,t.g2)("q-input"),F=(0,t.g2)("q-btn"),$=(0,t.g2)("q-form"),R=(0,t.g2)("q-page"),W=(0,t.g2)("q-toolbar-title"),V=(0,t.g2)("q-toolbar"),q=(0,t.g2)("q-card-section"),A=(0,t.g2)("q-card"),K=(0,t.g2)("q-dialog"),x=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(R,null,{default:(0,t.k6)((function(){return[(0,t.Lk)("div",s,[(0,t.Lk)("div",{class:(0,a.C4)(["chgpwd-item","tabPassword"===e.chgpwdTab?"is-active":""]),onClick:o[0]||(o[0]=function(o){return e.goToTab("tabPassword")})},[(0,t.Lk)("span",null,(0,a.v_)(e.$t("lang.chgpwd_password")),1)],2),(0,t.Lk)("div",{class:(0,a.C4)(["chgpwd-item","tabWithdrawPassword"===e.chgpwdTab?"is-active":""]),onClick:o[1]||(o[1]=function(o){return e.goToTab("tabWithdrawPassword")})},[(0,t.Lk)("span",null,(0,a.v_)(e.$t("lang.chgpwd_withdraw_password")),1)],2)]),"tabPassword"===e.chgpwdTab?((0,t.uX)(),(0,t.Wv)($,{key:0,onSubmit:e.submitUpdatePwd},{default:(0,t.k6)((function(){return[(0,t.Lk)("div",l,[(0,t.bF)(k,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.chgpwd_please_enter_old_password"))+" ",1),d]})),_:1}),(0,t.bF)(y,{ref:"oldPasswordRef",standout:"",modelValue:e.formChgAccountPwd.oldPassword,"onUpdate:modelValue":o[3]||(o[3]=function(o){return e.formChgAccountPwd.oldPassword=o}),class:"q-pb-xs","hide-bottom-space":"",type:e.isPwd?"password":"text",label:e.$t("lang.chgpwd_old_password"),"lazy-rules":"",clearable:"",rules:[function(o){return o&&o.length>0||e.$t("lang.chgpwd_please_enter_old_password")}]},{append:(0,t.k6)((function(){return[(0,t.bF)(C,{color:"dark",name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[2]||(o[2]=function(o){return e.isPwd=!e.isPwd})},null,8,["name"])]})),_:1},8,["modelValue","type","label","rules"]),(0,t.bF)(k,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.chgpwd_please_enter_new_password"))+" ",1),i]})),_:1}),(0,t.bF)(y,{ref:"passwordRef",standout:"",modelValue:e.formChgAccountPwd.password,"onUpdate:modelValue":o[5]||(o[5]=function(o){return e.formChgAccountPwd.password=o}),class:"q-pb-xs","hide-bottom-space":"",type:e.isPwd?"password":"text",label:e.$t("lang.chgpwd_new_password"),"lazy-rules":"",clearable:"",rules:[function(o){return o&&o.length>0||e.$t("lang.chgpwd_please_enter_new_password")}]},{append:(0,t.k6)((function(){return[(0,t.bF)(C,{color:"dark",name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[4]||(o[4]=function(o){return e.isPwd=!e.isPwd})},null,8,["name"])]})),_:1},8,["modelValue","type","label","rules"]),(0,t.bF)(k,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.chgpwd_please_enter_confirm_password"))+" ",1),c]})),_:1}),(0,t.bF)(y,{ref:"confirmPasswordRef",standout:"",modelValue:e.formChgAccountPwd.confirmNewPwd,"onUpdate:modelValue":o[7]||(o[7]=function(o){return e.formChgAccountPwd.confirmNewPwd=o}),class:"q-pb-xs","hide-bottom-space":"",type:e.isPwd?"password":"text",label:e.$t("lang.chgpwd_confirm_password"),"lazy-rules":"",clearable:"",rules:[function(o){return o&&o.length>0||e.$t("lang.chgpwd_please_enter_confirm_password")},function(o){return o===e.formChgAccountPwd.password||e.$t("lang.chgpwd_confirm_password_not_match")}]},{append:(0,t.k6)((function(){return[(0,t.bF)(C,{color:"dark",name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[6]||(o[6]=function(o){return e.isPwd=!e.isPwd})},null,8,["name"])]})),_:1},8,["modelValue","type","label","rules"])]),(0,t.Lk)("div",u,[(0,t.bF)(F,{type:"submit",class:"common-large-btn","no-caps":"",label:e.$t("lang.chgpwd_confirm"),width:"100%",style:{width:"100%"}},null,8,["label"])])]})),_:1},8,["onSubmit"])):(0,t.Q3)("",!0),"tabWithdrawPassword"===e.chgpwdTab?((0,t.uX)(),(0,t.Wv)($,{key:1,onSubmit:e.submitUpdateWithdrawPwd},{default:(0,t.k6)((function(){return[(0,t.Lk)("div",w,[e.store.registeredWithdrawPassword&&null==e.secondCodeId?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(k,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.chgpwd_please_enter_old_withdraw_password"))+" ",1),p]})),_:1}),(0,t.bF)(y,{ref:"oldWithdrawPasswordRef",standout:"",modelValue:e.formChgWithdrawPwd.oldPassword,"onUpdate:modelValue":o[9]||(o[9]=function(o){return e.formChgWithdrawPwd.oldPassword=o}),class:"q-pb-xs","hide-bottom-space":"",type:e.isPwd?"password":"text",label:e.$t("lang.chgpwd_old_withdraw_password"),"lazy-rules":"",clearable:"",rules:[function(o){return o&&o.length>0||e.$t("lang.chgpwd_please_enter_old_withdraw_password")},function(o){return o&&o.length>=6&&o.length<=11||e.$t("lang.length_between_6_11")}]},{append:(0,t.k6)((function(){return[(0,t.bF)(C,{color:"dark",name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[8]||(o[8]=function(o){return e.isPwd=!e.isPwd})},null,8,["name"])]})),_:1},8,["modelValue","type","label","rules"])],64)):(0,t.Q3)("",!0),(0,t.bF)(k,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.chgpwd_please_enter_new_withdraw_password"))+" ",1),f]})),_:1}),(0,t.bF)(y,{ref:"withdrawPasswordRef",standout:"",modelValue:e.formChgWithdrawPwd.password,"onUpdate:modelValue":o[11]||(o[11]=function(o){return e.formChgWithdrawPwd.password=o}),class:"q-pb-xs","hide-bottom-space":"",type:e.isPwd?"password":"text",label:e.$t("lang.chgpwd_new_withdraw_password"),"lazy-rules":"",clearable:"",rules:[function(o){return o&&o.length>0||e.$t("lang.chgpwd_please_enter_new_withdraw_password")},function(o){return o&&o.length>=6&&o.length<=11||e.$t("lang.length_between_6_11")}]},{append:(0,t.k6)((function(){return[(0,t.bF)(C,{color:"dark",name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[10]||(o[10]=function(o){return e.isPwd=!e.isPwd})},null,8,["name"])]})),_:1},8,["modelValue","type","label","rules"]),(0,t.bF)(k,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.chgpwd_please_enter_confirm_withdraw_password"))+" ",1),g]})),_:1}),(0,t.bF)(y,{ref:"confirmWithdrawPasswordRef",standout:"",modelValue:e.formChgWithdrawPwd.confirmNewPwd,"onUpdate:modelValue":o[13]||(o[13]=function(o){return e.formChgWithdrawPwd.confirmNewPwd=o}),class:"q-pb-xs","hide-bottom-space":"",type:e.isPwd?"password":"text",label:e.$t("lang.chgpwd_confirm_withdraw_password"),"lazy-rules":"",clearable:"",rules:[function(o){return o&&o.length>0||e.$t("lang.chgpwd_please_enter_confirm_withdraw_password")},function(o){return o&&o.length>=6&&o.length<=11||e.$t("lang.length_between_6_11")},function(o){return o===e.formChgWithdrawPwd.password||e.$t("lang.chgpwd_confirm_withdraw_password_not_match")}]},{append:(0,t.k6)((function(){return[(0,t.bF)(C,{color:"dark",name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[12]||(o[12]=function(o){return e.isPwd=!e.isPwd})},null,8,["name"])]})),_:1},8,["modelValue","type","label","rules"]),null!==e.secondCodeId?((0,t.uX)(),(0,t.CE)(t.FK,{key:1},[(0,t.bF)(k,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.chgpwd_please_insert_otp_code"))+" ",1),h]})),_:1}),(0,t.bF)(y,{ref:"otpCodeRef",standout:"",modelValue:e.formChgWithdrawPwd.otpCode,"onUpdate:modelValue":o[15]||(o[15]=function(o){return e.formChgWithdrawPwd.otpCode=o}),class:"q-pb-xs","hide-bottom-space":"",type:e.isPwd?"password":"text",label:e.$t("lang.chgpwd_otp_code"),"lazy-rules":"",clearable:"",rules:[function(o){return o&&o.length>0||e.$t("lang.chgpwd_please_insert_otp_code")}]},{append:(0,t.k6)((function(){return[(0,t.bF)(C,{color:"dark",name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[14]||(o[14]=function(o){return e.isPwd=!e.isPwd})},null,8,["name"])]})),_:1},8,["modelValue","type","label","rules"])],64)):(0,t.Q3)("",!0),null!==e.memberEmail&&null==e.secondCodeId?((0,t.uX)(),(0,t.CE)("div",{key:2,class:"forget-pwd-tip",onClick:o[16]||(o[16]=function(o){return e.openCaptchaDialog()})},(0,a.v_)(e.$t("lang.chgpwd_forgot_withdraw_password")),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",_,[(0,t.bF)(F,{type:"submit",class:"common-large-btn","no-caps":"",label:e.$t("lang.chgpwd_confirm"),width:"100%",style:{width:"100%"}},null,8,["label"])])]})),_:1},8,["onSubmit"])):(0,t.Q3)("",!0)]})),_:1}),(0,t.bF)(K,{modelValue:e.showCaptchaDialog,"onUpdate:modelValue":o[19]||(o[19]=function(o){return e.showCaptchaDialog=o}),width:"100%","no-backdrop-dismiss":""},{default:(0,t.k6)((function(){return[(0,t.bF)(A,{width:"100%"},{default:(0,t.k6)((function(){return[(0,t.bF)(q,{class:"q-pa-md bg-brightbtn text-white"},{default:(0,t.k6)((function(){return[(0,t.bF)(V,null,{default:(0,t.k6)((function(){return[(0,t.bF)(W,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.personal_verification")),1)]})),_:1}),(0,t.bo)((0,t.bF)(F,{flat:"",round:"",dense:"",icon:"close"},null,512),[[x]])]})),_:1})]})),_:1}),(0,t.Lk)("div",m,[(0,t.bF)(q,{class:"q-mb-md q-pa-md"},{default:(0,t.k6)((function(){return[(0,t.bF)(y,{modelValue:e.innerCaptchaRef,"onUpdate:modelValue":o[18]||(o[18]=function(o){return e.innerCaptchaRef=o}),placeholder:e.$t("lang.personal_verification")},{append:(0,t.k6)((function(){return[(0,t.Lk)("img",{src:e.verificationImg,title:e.$t("lang.personal_verification_refresh"),style:{"margin-top":"6px",cursor:"pointer"},onClick:o[17]||(o[17]=function(){return e.getCode&&e.getCode.apply(e,arguments)})},null,8,b)]})),_:1},8,["modelValue","placeholder"])]})),_:1}),(0,t.bF)(F,{onClick:e.onCaptchaSubmit,label:e.$t("lang.personal_sendotp"),color:"brightbtn"},null,8,["onClick","label"])])]})),_:1})]})),_:1},8,["modelValue"])],64)}var v=n(38734),k=(n(85038),n(88122)),C=n(43710),y=n(15868),F=n(60455),$=n(23537);const R=(0,t.pM)({name:"ChangePwdView",setup:function(){var e=(0,v.KR)(!0),o=(0,C.A)(),a=(0,F.rd)(),r=(0,y.Z)(),s=(0,$.s9)(),l=s.t,d=n(54760),i=(0,v.Kh)({memberInfo:{}}),c=((0,v.Kh)({memberInfo:{}}),(0,v.Kh)({oldPassword:"",newPassword:"",confirmPassword:""})),u=(0,v.Kh)({oldPassword:"",newPassword:"",confirmPassword:""}),w=function(){c.oldPassword="",c.newPassword="",c.confirmPassword=""},p=function(){u.oldPassword="",u.newPassword="",u.confirmPassword=""},f=(0,v.KR)("tabPassword"),g=function(e){c.oldPassword="",c.newPassword="",c.confirmPassword="",u.oldPassword="",u.newPassword="",u.confirmPassword="",f.value=e},h=(0,v.KR)(null),_=function(){P(),m.value=!0},m=(0,v.KR)(!1),b=(0,v.KR)(""),P=function(){k.api.get("/member/verificationCode").then((function(e){0===e.code&&(b.value="data:image/png;base64,"+e.data.img,V.value=e.data.id)}))["catch"]((function(e){o.notify({color:"negative",position:"top",message:e.message,icon:"report_problem"})}))},R=function(){k.api.post("/session/sendNewEmail",d.stringify({captchaCode:W.value,codeId:V.value})).then((function(e){P();var n=e.message||l("lang.personal_emailotp_sent"),t="positive";0===e.code?(m.value=!1,q.value=e.data.codeId):P(),n&&o.notify({message:n,color:t}),P(),console.log("onCaptchaSubmit",e)}))},W=(0,v.KR)(),V=(0,v.KR)(),q=(0,v.KR)(null),A=function(){k.api.post("/session/verifyOtpAndChangePassword",d.stringify({password:u.password,code:u.otpCode,codeId:q.value})).then((function(e){0===e.code&&(u.password="",u.confirmNewPwd="",u.otpCode="",o.notify({color:"positive",position:"top",message:l("lang.success"),icon:"report_problem"}))}))["catch"]((function(e){}))};(0,t.sV)((function(){console.log(r),h.value=r.email,q.value=null,P()}));(0,v.KR)(!1);var K=(0,v.KR)(),x=(0,v.KR)(),L=(0,v.KR)(),I=(0,v.Kh)({oldPassword:"",password:"",confirmNewPwd:""}),Q=function(){K.value.validate(),x.value.validate(),L.value.validate(),K.value.hasError||x.value.hasError||k.api.post("/session/password",d.stringify({oldPassword:c.oldPassword,password:c.password})).then((function(e){0===e.code?(o.notify({color:"positive",position:"top",message:l("lang.chgpwd_password_updated_successfully"),icon:"check_circle_outline"}),a.go(-1)):o.notify({color:"negative",position:"top",message:e.message,icon:"report_problem"})}))["catch"]((function(e){console.log("error",e)}))},T=(0,v.KR)(),U=(0,v.KR)(),E=(0,v.KR)(),S=(0,v.KR)(),N=function(){U.value.validate(),E.value.validate(),r.registeredWithdrawPassword&&null==q.value?(T.value.validate(),T.value.hasError||U.value.hasError||k.api.post("/session/withdrawPassword",d.stringify({oldPassword:u.oldPassword,password:u.password})).then((function(e){0===e.code?(o.notify({color:"positive",position:"top",message:l("lang.chgpwd_withdraw_password_updated_successfully"),icon:"check_circle_outline"}),a.go(-1)):o.notify({color:"negative",position:"top",message:e.message,icon:"report_problem"})}))["catch"]((function(e){console.log("error",e)}))):U.value.hasError||(null!==q.value?A():k.api.post("/session/withdrawPassword",d.stringify({oldPassword:"",password:u.password})).then((function(e){0===e.code?(o.notify({color:"positive",position:"top",message:l("lang.chgpwd_withdraw_password_updated_successfully"),icon:"check_circle_outline"}),a.go(-1)):o.notify({color:"negative",position:"top",message:e.message,icon:"report_problem"})}))["catch"]((function(e){console.log("error",e)})))};return{personalState:i,updatePwdInfo:I,submitUpdatePwd:Q,oldPasswordRef:K,passwordRef:x,confirmPasswordRef:L,isPwd:e,store:r,formChgAccountPwd:c,formChgWithdrawPwd:u,chgpwdTab:f,goToTab:g,submitUpdateWithdrawPwd:N,oldWithdrawPasswordRef:T,withdrawPasswordRef:U,confirmWithdrawPasswordRef:E,resetChgAccountPwd:w,resetChgWithdrawPwd:p,showCaptchaDialog:m,getCode:P,openCaptchaDialog:_,verificationImg:b,onCaptchaSubmit:R,memberEmail:h,innerCaptchaRef:W,innerCaptchaCodeId:V,verifyOtpAndChangePassword:A,secondCodeId:q,otpCodeRef:S}}});var W=n(12807),V=n(33177),q=n(21565),A=n(68926),K=n(24609),x=n(69001),L=n(57201),I=n(97569),Q=n(27066),T=n(79351),U=n(56769),E=n(79197),S=n(98582),N=n.n(S);const z=(0,W.A)(R,[["render",P],["__scopeId","data-v-f31d8e98"]]),D=z;N()(R,"components",{QPage:V.A,QForm:q.A,QInput:A.A,QIcon:K.A,QBtn:x.A,QDialog:L.A,QCard:I.A,QCardSection:Q.A,QToolbar:T.A,QToolbarTitle:U.A}),N()(R,"directives",{ClosePopup:E.A})}}]);