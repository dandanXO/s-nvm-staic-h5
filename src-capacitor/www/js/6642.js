"use strict";(globalThis["webpackChunkvnm_static_h5"]=globalThis["webpackChunkvnm_static_h5"]||[]).push([[6642],{36642:(e,n,l)=>{l.r(n),l.d(n,{default:()=>ae});l(10239);var t=l(61758),a=l(58790),o=l(29104),r=l(38734),u=l(89136),c=l.n(u),s=l(39834),d=l.n(s),i=l(88122),b=l(43710),m=l(60455),_=l(15868),p=l(97772),f={class:"headers"},g={class:"black-titles"},v={class:"contents"},k=["src","title"],h={class:"headers"},y={class:"black-titles"},F={class:"contents"},$=(0,t.Lk)("img",{style:{width:"2.5rem"},src:c()},null,-1),V={class:"headers"},w={class:"black-titles"},L={class:"contents"},C=(0,t.Lk)("img",{style:{width:"2.5rem"},src:d()},null,-1),R={class:"headers"},A={class:"black-titles"},K={class:"q-mb-md"},x={class:"bind-wrapper"},q=(0,t.Lk)("em",null,"*",-1),I=["src"],Q=["src"],E=(0,t.Lk)("em",null,"*",-1),N=(0,t.Lk)("em",null,"*",-1),U=(0,t.Lk)("em",null,"*",-1),W=(0,t.Lk)("em",null,"*",-1),z=(0,t.Lk)("em",null,"*",-1),B={class:"note"};const j={__name:"BindBankCardView",setup:function(e){var n=l(54760),u=(0,b.A)(),c=(0,_.Z)(),s=(0,m.rd)(),d="https://files.fbok59j8xi.com",j=(0,r.KR)(),T=(0,r.KR)(),X=(0,r.KR)(),P=(0,r.KR)(),S=(0,r.Kh)({bankId:void 0,cardNumber:"",cardAccount:c.realName,cardAddress:"",telephone:c.phone,smsCode:"",smsCodeId:""}),D=function(e){if(!/^\d+$/.test(e))return(0,p.t)("lang.bd_please_enter_digit_only")},M=(0,r.KR)(""),Z=(0,r.KR)(""),G=(0,r.KR)(""),H=(0,r.KR)(),J=function(){ee.value=!1,G.value="",i.api.get("/member/verificationCode").then((function(e){0===e.code&&(M.value="data:image/png;base64,"+e.data.img,Z.value=e.data.id)}))["catch"]((function(e){console.log(e)}))},O=(0,r.KR)(!1),Y=function(){J(),O.value=!0},ee=(0,r.KR)(!1),ne=(0,r.KR)(!1),le=(0,r.KR)(!1),te=(0,r.KR)(""),ae=function(){H.value.validate(),H.value.hasError||i.api.post("/session/sendSms",n.stringify({captchaCode:G.value,codeId:Z.value})).then((function(e){0===e.code?(ee.value=!0,S.smsCode="",S.smsCodeId=e.data.codeId,ne.value=!0):(te.value=e.message,le.value=!0),O.value=!1}))["catch"]((function(){J()}))},oe=(0,r.KR)([]),re=function(){S.bankId=null,S.cardNumber="",S.cardAddress="",S.smsCode="",c.getMemberInfo().then((function(){c.realName?c.phone?i.api.get("/session/withdraw/card").then((function(e){if(0===e.code)for(var n=0,l=e.data.length;n<l;n++){var t=e.data[n],a=t.bankType,o=t.bankCode;"BANK"===a&&78!==o&&oe.value.push(t)}}))["catch"]((function(e){console.log("error",e)})):(u.notify({color:"negative",position:"top",message:(0,p.t)("lang.bd_please_enter_phone_number"),icon:"report_problem"}),s.push("/account/verifyTelephone")):(u.notify({color:"negative",position:"top",message:(0,p.t)("lang.bd_please_enter_real_name"),icon:"report_problem"}),s.push("/account/personal"))}))},ue=function(){j.value.validate(),T.value.validate(),X.value.validate(),P.value?P.value.validate():u.notify({color:"negative",position:"top",message:(0,p.t)("lang.bd_click_verification"),icon:"report_problem"}),j.value.hasError||T.value.hasError||X.value.hasError||P.value.hasError||i.api.post("/session/bankCard",n.stringify(S)).then((function(e){0===e.code&&(u.notify({color:"positive",position:"top",message:(0,p.t)("lang.bd_added_bank_card"),icon:"check_circle_outline"}),s.push("/account/withdraw"))}))["catch"]((function(e){console.log("error",e)}))},ce=function(){document.activeElement&&"input"===document.activeElement.tagName.toLowerCase()||Y()},se=(0,r.KR)(!0);return(0,t.n)((function(){re()})),function(e,n){var l=(0,t.g2)("q-btn"),u=(0,t.g2)("q-input"),c=(0,t.g2)("q-card-actions"),s=(0,t.g2)("q-card"),i=(0,t.g2)("q-dialog"),b=(0,t.g2)("q-label"),m=(0,t.g2)("q-item-section"),_=(0,t.g2)("q-item-label"),p=(0,t.g2)("q-item"),Z=(0,t.g2)("q-select"),re=(0,t.g2)("q-form"),de=(0,t.g2)("q-page"),ie=(0,t.gN)("close-popup");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(i,{class:"modal-common-div",modelValue:O.value,"onUpdate:modelValue":n[4]||(n[4]=function(e){return O.value=e})},{default:(0,t.k6)((function(){return[(0,t.bF)(s,{style:{width:"100%"},class:"modalcontent"},{default:(0,t.k6)((function(){return[(0,t.Lk)("div",f,[(0,t.Lk)("div",g,(0,a.v_)(e.$t("lang.captcha_code")),1),(0,t.bo)((0,t.bF)(l,{class:"color-font-1",flat:"",round:"",dense:"",icon:"close"},null,512),[[ie]])]),(0,t.Lk)("div",v,[(0,t.bF)(u,{ref_key:"innerCaptchaRef",ref:H,modelValue:G.value,"onUpdate:modelValue":n[1]||(n[1]=function(e){return G.value=e}),placeholder:e.$t("lang.captcha_code"),maxlength:"4",rules:[function(n){return n&&n.length>0||e.$t("lang.enter_captcha_code")},function(n){return n&&4===n.length||e.$t("lang.captcha_code_must_4")}],onKeydown:n[2]||(n[2]=(0,o.jR)((function(e){return ae()}),["enter"]))},{append:(0,t.k6)((function(){return[(0,t.Lk)("img",{src:M.value,title:e.$t("lang.captcha_refresh"),style:{"margin-top":"6px",cursor:"pointer"},onClick:n[0]||(n[0]=function(e){return J()})},null,8,k)]})),_:1},8,["modelValue","placeholder","rules"])]),(0,t.bF)(c,{style:{margin:"0 auto"},align:"center",class:"bg-white text-teal"},{default:(0,t.k6)((function(){return[(0,t.bF)(l,{style:{width:"100%"},class:"common-md-btn",flat:"",label:e.$t("lang.verification_code_send"),onClick:n[3]||(n[3]=function(e){return ae()})},null,8,["label"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,t.bF)(i,{class:"modal-common-div",modelValue:ne.value,"onUpdate:modelValue":n[5]||(n[5]=function(e){return ne.value=e})},{default:(0,t.k6)((function(){return[(0,t.bF)(s,{style:{width:"100%"},class:"modalcontent"},{default:(0,t.k6)((function(){return[(0,t.Lk)("div",h,[(0,t.Lk)("div",y,(0,a.v_)(e.$t("lang.system_hint")),1),(0,t.bo)((0,t.bF)(l,{class:"color-font-1",flat:"",round:"",dense:"",icon:"close"},null,512),[[ie]])]),(0,t.Lk)("div",F,[$,(0,t.Lk)("p",null,(0,a.v_)(e.$t("lang.system_operation_success")),1)]),(0,t.bF)(c,{style:{width:"100%"},align:"center",class:"bg-white text-teal"},{default:(0,t.k6)((function(){return[(0,t.bo)((0,t.bF)(l,{class:"common-md-btn",flat:"",label:e.$t("lang.system_confirm")},null,8,["label"]),[[ie]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,t.bF)(i,{class:"modal-common-div",modelValue:le.value,"onUpdate:modelValue":n[6]||(n[6]=function(e){return le.value=e})},{default:(0,t.k6)((function(){return[(0,t.bF)(s,{style:{width:"100%"},class:"modalcontent"},{default:(0,t.k6)((function(){return[(0,t.Lk)("div",V,[(0,t.Lk)("div",w,(0,a.v_)(e.$t("lang.system_hint")),1),(0,t.bo)((0,t.bF)(l,{class:"color-font-1",flat:"",round:"",dense:"",icon:"close"},null,512),[[ie]])]),(0,t.Lk)("div",L,[C,(0,t.Lk)("p",null,(0,a.v_)(te.value||e.$t("lang.system_verify_failed")),1)]),(0,t.bF)(c,{style:{width:"100%"},align:"center",class:"bg-white text-teal"},{default:(0,t.k6)((function(){return[(0,t.bo)((0,t.bF)(l,{class:"common-md-btn",flat:"",label:e.$t("lang.system_confirm")},null,8,["label"]),[[ie]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,t.bF)(i,{class:"modal-common-div",modelValue:se.value,"onUpdate:modelValue":n[7]||(n[7]=function(e){return se.value=e})},{default:(0,t.k6)((function(){return[(0,t.bF)(s,{style:{width:"100%"},class:"modalcontent"},{default:(0,t.k6)((function(){return[(0,t.Lk)("div",R,[(0,t.Lk)("div",A,(0,a.v_)(e.$t("lang.bd_note")),1),(0,t.bo)((0,t.bF)(l,{class:"color-font-1",flat:"",round:"",dense:"",icon:"close"},null,512),[[ie]])]),(0,t.Lk)("ol",null,[(0,t.Lk)("li",K,(0,a.v_)(e.$t("lang.bd_note_para_01")),1),(0,t.Lk)("li",null,(0,a.v_)(e.$t("lang.bd_note_para_02")),1)]),(0,t.bF)(c,{style:{width:"100%"},align:"center",class:"bg-white text-teal"},{default:(0,t.k6)((function(){return[(0,t.bo)((0,t.bF)(l,{class:"common-md-btn",flat:"",label:e.$t("lang.system_confirm")},null,8,["label"]),[[ie]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,t.bF)(de,{class:"bind-container"},{default:(0,t.k6)((function(){return[(0,t.Lk)("div",x,[(0,t.bF)(re,{class:"bind-item q-my-sm"},{default:(0,t.k6)((function(){return[(0,t.bF)(b,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.bd_account_bank"))+" ",1),q]})),_:1}),(0,t.bF)(Z,{ref_key:"bankCardRef",ref:j,standout:"",modelValue:S.bankId,"onUpdate:modelValue":n[8]||(n[8]=function(e){return S.bankId=e}),class:"q-pb-xs","hide-bottom-space":"",label:e.$t("lang.bd_please_select"),"lazy-rules":"",clearable:"",options:oe.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",rules:[function(n){return n||e.$t("lang.bd_please_select")}]},{"selected-item":(0,t.k6)((function(e){return[(0,t.bF)(m,{avatar:""},{default:(0,t.k6)((function(){return[e.opt.bankIcon?((0,t.uX)(),(0,t.CE)("img",{key:0,style:{width:"30px","margin-top":"10px","margin-bottom":"10px"},src:(0,r.R1)(d)+"/payment/"+e.opt.bankIcon},null,8,I)):(0,t.Q3)("",!0)]})),_:2},1024),(0,t.bF)(m,null,{default:(0,t.k6)((function(){return[(0,t.bF)(_,{style:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap"}},{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.opt.name),1)]})),_:2},1024)]})),_:2},1024)]})),option:(0,t.k6)((function(e){return[(0,t.bF)(p,(0,a._B)((0,t.Ng)(e.itemProps)),{default:(0,t.k6)((function(){return[(0,t.bF)(m,{avatar:""},{default:(0,t.k6)((function(){return[e.opt.bankIcon?((0,t.uX)(),(0,t.CE)("img",{key:0,style:{width:"30px","margin-top":"10px","margin-bottom":"10px"},src:(0,r.R1)(d)+"/payment/"+e.opt.bankIcon},null,8,Q)):(0,t.Q3)("",!0)]})),_:2},1024),(0,t.bF)(m,null,{default:(0,t.k6)((function(){return[(0,t.bF)(_,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.opt.name),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1040)]})),_:1},8,["modelValue","label","options","rules"]),(0,t.bF)(b,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.bd_bank_acc_number"))+" ",1),E]})),_:1}),(0,t.bF)(u,{ref_key:"cardNumberRef",ref:T,type:"number",standout:"",modelValue:S.cardNumber,"onUpdate:modelValue":n[9]||(n[9]=function(e){return S.cardNumber=e}),class:"q-pb-xs","hide-bottom-space":"",placeholder:e.$t("lang.bd_please_enter_bank_card"),"lazy-rules":"",clearable:"",rules:[function(n){return n&&n.length>0||e.$t("lang.bd_please_enter_bank_card")},D]},null,8,["modelValue","placeholder","rules"]),(0,t.bF)(b,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.bd_real_name"))+" ",1),N]})),_:1}),(0,t.bF)(u,{standout:"",modelValue:S.cardAccount,"onUpdate:modelValue":n[10]||(n[10]=function(e){return S.cardAccount=e}),class:"q-pb-xs","hide-bottom-space":"",placeholder:e.$t("lang.bd_please_enter_real_name"),"lazy-rules":"",clearable:"",readonly:""},null,8,["modelValue","placeholder"]),(0,t.bF)(b,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.bd_acc_bank_address"))+" ",1),U]})),_:1}),(0,t.bF)(u,{ref_key:"cardAddressRef",ref:X,standout:"",modelValue:S.cardAddress,"onUpdate:modelValue":n[11]||(n[11]=function(e){return S.cardAddress=e}),class:"q-pb-xs","hide-bottom-space":"",placeholder:e.$t("lang.bd_please_enter_acc_bank_address"),"lazy-rules":"",clearable:"",rules:[function(n){return n&&n.length>0||e.$t("lang.bd_please_enter_acc_bank_address")}]},null,8,["modelValue","placeholder","rules"]),(0,t.bF)(b,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.bd_phone_number"))+" ",1),W]})),_:1}),(0,t.bF)(u,{standout:"",modelValue:S.telephone,"onUpdate:modelValue":n[13]||(n[13]=function(e){return S.telephone=e}),class:"q-pb-xs","hide-bottom-space":"",placeholder:e.$t("lang.bd_please_enter_phone_number"),"lazy-rules":"",clearable:"",readonly:""},{append:(0,t.k6)((function(){return[(0,t.bF)(l,{onClick:n[12]||(n[12]=function(e){return Y()}),type:"submit",class:"common-sm-btn bottom-btn get-otp-btn",label:e.$t("lang.bd_get_otp"),color:"brightbtn",rounded:""},null,8,["label"])]})),_:1},8,["modelValue","placeholder"]),ee.value?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.bF)(b,null,{default:(0,t.k6)((function(){return[(0,t.eW)((0,a.v_)(e.$t("lang.bd_otp_code"))+" ",1),z]})),_:1}),(0,t.bF)(u,{ref_key:"phoneVerificationRef",ref:P,standout:"",modelValue:S.smsCode,"onUpdate:modelValue":n[14]||(n[14]=function(e){return S.smsCode=e}),class:"q-pb-xs","hide-bottom-space":"",placeholder:e.$t("lang.bd_please_enter_otp"),"lazy-rules":"",clearable:"",maxlength:"6",rules:[function(n){return n&&n.length>3||e.$t("lang.bd_please_enter_otp")}],onKeydown:[(0,o.jR)((0,o.D$)(ce,["prevent"]),["enter"]),n[15]||(n[15]=(0,o.jR)((function(e){return ue()}),["enter"]))]},null,8,["modelValue","placeholder","rules","onKeydown"])],64)):(0,t.Q3)("",!0)]})),_:1}),(0,t.Lk)("div",B,(0,a.v_)(e.$t("lang.bd_reminder_name_issue")),1),(0,t.bF)(l,{class:"common-large-btn",label:e.$t("lang.bd_submit"),width:"100%",style:{width:"100%"},onClick:n[16]||(n[16]=function(e){return ue()})},null,8,["label"])])]})),_:1})],64)}}};var T=l(57201),X=l(97569),P=l(69001),S=l(68926),D=l(16334),M=l(33177),Z=l(21565),G=l(833),H=l(63418),J=l(35779),O=l(75329),Y=l(51225),ee=l(79197),ne=l(98582),le=l.n(ne);const te=j,ae=te;le()(j,"components",{QDialog:T.A,QCard:X.A,QBtn:P.A,QInput:S.A,QCardActions:D.A,QPage:M.A,QForm:Z.A,QSelect:G.A,QItemSection:H.A,QItemLabel:J.A,QItem:O.A,QField:Y.A}),le()(j,"directives",{ClosePopup:ee.A})}}]);