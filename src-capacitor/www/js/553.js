"use strict";(globalThis["webpackChunkvnm_static_h5"]=globalThis["webpackChunkvnm_static_h5"]||[]).push([[553],{50553:(e,n,t)=>{t.r(n),t.d(n,{default:()=>M});t(10239);var l=t(61758),a=t(29104),o=t(58790),u=t(89136),c=t.n(u),r=t(39834),s=t.n(r),i=t(38734),d=t(88122),m=t(43710),f=t(60455),b=t(15868),v={class:"headers"},p=(0,l.Lk)("div",{class:"black-titles"},"验证码",-1),h={class:"contents"},k=["src"],g={class:"headers"},y=(0,l.Lk)("div",{class:"black-titles"},"信息",-1),_=(0,l.Lk)("div",{class:"contents"},[(0,l.Lk)("img",{style:{width:"2.5rem"},src:c()}),(0,l.Lk)("p",null,"操作成功，请查看手机验证码！")],-1),F={class:"headers"},C=(0,l.Lk)("div",{class:"black-titles"},"系统提示",-1),L={class:"contents"},w=(0,l.Lk)("img",{style:{width:"2.5rem"},src:s()},null,-1),K={class:"bind-wrapper"},R=(0,l.Lk)("em",null,"*",-1),V=(0,l.Lk)("em",null,"*",-1),A={class:"type-toggle"},E=["src"],q=(0,l.Lk)("em",null,"*",-1),x={class:"category-toggle"},I=(0,l.Lk)("em",null,"*",-1),P=(0,l.Lk)("em",null,"*",-1),Q=(0,l.Lk)("div",{class:"note"},"温馨提示：若持卡人姓名不符可联系在线客服更正信息，感谢您的支持与 理解！",-1);const W={__name:"BindEWalletView",setup:function(e){var n=(0,i.KR)(0),u=(0,i.KR)("KDOU"),c=function(e,t){n.value=e,u.value=t,j.bankId=le.value[e].id},r=((0,i.KR)(["EBPAY","ERC20","EBPAY","ERC20","EBPAY","ERC20","EBPAY","ERC20"]),(0,i.KR)(0),t(54760)),s=(0,m.A)(),W=(0,b.Z)(),N=(0,f.rd)(),U="https://files.fbok59j8xi.com/payment/",B=(0,i.KR)(),Y=(0,i.KR)(),T=(0,i.KR)(),j=(0,i.Kh)({bankId:void 0,cardNumber:"",cardAccount:W.realName,cardAddress:"",telephone:W.phone,smsCode:"",smsCodeId:""}),z=function(e){var t=le.value[n.value].code;switch(t){case"KDPAY":return e.length>33&&e.length<35||"长度应为34个字符";case"EBPAY":return e.length>33&&e.length<35||"长度应为34个字符";case"OKPAY":return e.length>15&&e.length<17||"长度应为16个字符";default:break}},D=function(e){var n=/^[a-zA-Z0-9]+$/;return n.test(e)||"请输入有效的电子钱包号码"},X=(0,i.KR)(""),O=(0,i.KR)(""),Z=(0,i.KR)(""),$=(0,i.KR)(),M=function(){H.value=!1,Z.value="",d.api.get("/member/verificationCode").then((function(e){0===e.code&&(X.value="data:image/png;base64,"+e.data.img,O.value=e.data.id)}))["catch"]((function(e){console.log(e)}))},S=(0,i.KR)(!1),G=function(){M(),S.value=!0},H=(0,i.KR)(!1),J=(0,i.KR)(!1),ee=(0,i.KR)(!1),ne=(0,i.KR)(""),te=function(){$.value.validate(),$.value.hasError||d.api.post("/session/sendSms",r.stringify({captchaCode:Z.value,codeId:O.value})).then((function(e){0===e.code?(H.value=!0,j.smsCode="",j.smsCodeId=e.data.codeId,J.value=!0):(ne.value=e.message,ee.value=!0),S.value=!1}))["catch"]((function(){M()}))},le=(0,i.KR)([]),ae=function(){W.getMemberInfo().then((function(){W.realName?W.phone?d.api.get("/session/withdraw/card").then((function(e){if(0===e.code){for(var n=0,t=e.data.length;n<t;n++){var l=e.data[n],a=l.bankType;"EWALLET"===a&&le.value.push(l)}j.bankId=le.value[0].id}}))["catch"]((function(e){console.log("error",e)})):(s.notify({color:"negative",position:"top",message:"请输入您的电话号码",icon:"report_problem"}),N.push("/account/verifyTelephone")):(s.notify({color:"negative",position:"top",message:"请输入您的真实姓名",icon:"report_problem"}),N.push("/account/personal"))}))},oe=function(){B.value&&B.value.validate(),Y.value&&Y.value.validate(),H.value?T.value&&T.value.validate():s.notify({color:"negative",position:"top",message:"请点击获取验证码，并输入您的注册手机验证",icon:"report_problem"}),B.value&&B.value.hasError||Y.value&&Y.value.hasError||T.value&&T.value.hasError||d.api.post("/session/bankCard",r.stringify(j)).then((function(e){0===e.code&&(s.notify({color:"positive",position:"top",message:"已添加银行卡",icon:"check_circle_outline"}),N.push("/account/withdraw"))}))["catch"]((function(e){console.log("error",e)}))},ue=function(){document.activeElement&&"input"===document.activeElement.tagName.toLowerCase()||G()};return(0,l.sV)((function(){ae()})),function(e,t){var r=(0,l.g2)("q-btn"),s=(0,l.g2)("q-input"),i=(0,l.g2)("q-card-actions"),d=(0,l.g2)("q-card"),m=(0,l.g2)("q-dialog"),f=(0,l.g2)("q-label"),b=(0,l.g2)("q-form"),W=(0,l.g2)("q-page"),N=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(m,{class:"modal-common-div",modelValue:S.value,"onUpdate:modelValue":t[4]||(t[4]=function(e){return S.value=e})},{default:(0,l.k6)((function(){return[(0,l.bF)(d,{style:{width:"100%"},class:"modalcontent"},{default:(0,l.k6)((function(){return[(0,l.Lk)("div",v,[p,(0,l.bo)((0,l.bF)(r,{class:"color-font-1",flat:"",round:"",dense:"",icon:"close"},null,512),[[N]])]),(0,l.Lk)("div",h,[(0,l.bF)(s,{ref_key:"innerCaptchaRef",ref:$,modelValue:Z.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Z.value=e}),placeholder:"验证码",maxlength:"4",rules:[function(e){return e&&e.length>0||"请输入验证码"},function(e){return e&&4===e.length||"验证码必须为4个字符串"}],onKeydown:t[2]||(t[2]=(0,a.jR)((function(e){return te()}),["enter"]))},{append:(0,l.k6)((function(){return[(0,l.Lk)("img",{src:X.value,title:"点击刷新验证码",style:{"margin-top":"6px",cursor:"pointer"},onClick:t[0]||(t[0]=function(e){return M()})},null,8,k)]})),_:1},8,["modelValue","rules"])]),(0,l.bF)(i,{style:{margin:"0 auto"},align:"center",class:"bg-white text-teal"},{default:(0,l.k6)((function(){return[(0,l.bF)(r,{style:{width:"100%"},class:"common-md-btn",flat:"",label:"发送验证码",onClick:t[3]||(t[3]=function(e){return te()})})]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,l.bF)(m,{class:"modal-common-div",modelValue:J.value,"onUpdate:modelValue":t[5]||(t[5]=function(e){return J.value=e})},{default:(0,l.k6)((function(){return[(0,l.bF)(d,{style:{width:"100%"},class:"modalcontent"},{default:(0,l.k6)((function(){return[(0,l.Lk)("div",g,[y,(0,l.bo)((0,l.bF)(r,{class:"color-font-1",flat:"",round:"",dense:"",icon:"close"},null,512),[[N]])]),_,(0,l.bF)(i,{style:{width:"100%"},align:"center",class:"bg-white text-teal"},{default:(0,l.k6)((function(){return[(0,l.bo)((0,l.bF)(r,{class:"common-md-btn",flat:"",label:"确定"},null,512),[[N]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,l.bF)(m,{class:"modal-common-div",modelValue:ee.value,"onUpdate:modelValue":t[6]||(t[6]=function(e){return ee.value=e})},{default:(0,l.k6)((function(){return[(0,l.bF)(d,{style:{width:"100%"},class:"modalcontent"},{default:(0,l.k6)((function(){return[(0,l.Lk)("div",F,[C,(0,l.bo)((0,l.bF)(r,{class:"color-font-1",flat:"",round:"",dense:"",icon:"close"},null,512),[[N]])]),(0,l.Lk)("div",L,[w,(0,l.Lk)("p",null,(0,o.v_)(ne.value||"验证码校验失败，请刷新"),1)]),(0,l.bF)(i,{style:{width:"100%"},align:"center",class:"bg-white text-teal"},{default:(0,l.k6)((function(){return[(0,l.bo)((0,l.bF)(r,{class:"common-md-btn",flat:"",label:"确定"},null,512),[[N]])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"]),(0,l.bF)(W,{class:"bind-container"},{default:(0,l.k6)((function(){return[(0,l.Lk)("div",K,[(0,l.bF)(b,{class:"bind-item q-my-sm"},{default:(0,l.k6)((function(){return[(0,l.bF)(f,null,{default:(0,l.k6)((function(){return[(0,l.eW)(" 电子钱包 "),R]})),_:1}),(0,l.bF)(s,{ref_key:"cardNumberRef",ref:Y,type:"text",standout:"",modelValue:j.cardNumber,"onUpdate:modelValue":t[7]||(t[7]=function(e){return j.cardNumber=e}),class:"q-pb-xs","hide-bottom-space":"",label:"请输入电子钱包","lazy-rules":"",clearable:"",rules:[function(e){return e&&e.length>0||"请输入电子钱包"},z,D]},null,8,["modelValue","rules"]),(0,l.bF)(f,null,{default:(0,l.k6)((function(){return[(0,l.eW)(" 电子钱包种类 "),V]})),_:1}),(0,l.Lk)("div",A,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(le.value,(function(e,t){return(0,l.uX)(),(0,l.Wv)(r,{key:"".concat(e,"-").concat(t),class:(0,o.C4)("".concat(n.value===t?"common-sm-btn":"common-sm-white-btn"," content")),onClick:function(n){return c(t,e.name)}},{default:(0,l.k6)((function(){return[(0,l.Lk)("img",{src:U+e.bankIcon,alt:""},null,8,E),(0,l.Lk)("div",null,(0,o.v_)(e.name),1)]})),_:2},1032,["class","onClick"])})),128))]),(0,l.bF)(f,null,{default:(0,l.k6)((function(){return[(0,l.eW)(" 协议 "),q]})),_:1}),(0,l.Lk)("div",x,[(0,l.bF)(r,{class:"common-sm-btn"},{default:(0,l.k6)((function(){return[(0,l.eW)((0,o.v_)(u.value),1)]})),_:1})]),(0,l.bF)(f,null,{default:(0,l.k6)((function(){return[(0,l.eW)(" 手机号 "),I]})),_:1}),(0,l.bF)(s,{standout:"",modelValue:j.telephone,"onUpdate:modelValue":t[9]||(t[9]=function(e){return j.telephone=e}),class:"q-pb-xs","hide-bottom-space":"",label:"请输入您绑定的手机号","lazy-rules":"",clearable:"",readonly:""},{append:(0,l.k6)((function(){return[(0,l.bF)(r,{onClick:t[8]||(t[8]=function(e){return G()}),type:"submit",class:"common-sm-btn bottom-btn get-otp-btn",label:"获取验证码",color:"brightbtn",rounded:""})]})),_:1},8,["modelValue"]),H.value?((0,l.uX)(),(0,l.CE)(l.FK,{key:0},[(0,l.bF)(f,null,{default:(0,l.k6)((function(){return[(0,l.eW)(" 验证码 "),P]})),_:1}),(0,l.bF)(s,{ref_key:"phoneVerificationRef",ref:T,standout:"",modelValue:j.smsCode,"onUpdate:modelValue":t[10]||(t[10]=function(e){return j.smsCode=e}),class:"q-pb-xs","hide-bottom-space":"",label:"请输入您的注册手机验证","lazy-rules":"",clearable:"",maxlength:"6",rules:[function(e){return e&&e.length>3||"请输入您的注册手机验证"}],onKeydown:[(0,a.jR)((0,a.D$)(ue,["prevent"]),["enter"]),t[11]||(t[11]=(0,a.jR)((function(e){return oe()}),["enter"]))]},null,8,["modelValue","rules","onKeydown"])],64)):(0,l.Q3)("",!0)]})),_:1}),Q,(0,l.bF)(r,{class:"common-large-btn",label:"提交",width:"100%",style:{width:"100%"},onClick:t[12]||(t[12]=function(e){return oe()})})])]})),_:1})],64)}}};var N=t(57201),U=t(97569),B=t(69001),Y=t(68926),T=t(16334),j=t(33177),z=t(21565),D=t(51225),X=t(79197),O=t(98582),Z=t.n(O);const $=W,M=$;Z()(W,"components",{QDialog:N.A,QCard:U.A,QBtn:B.A,QInput:Y.A,QCardActions:T.A,QPage:j.A,QForm:z.A,QField:D.A}),Z()(W,"directives",{ClosePopup:X.A})}}]);