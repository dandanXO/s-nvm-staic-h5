"use strict";(globalThis["webpackChunkvnm_static_h5"]=globalThis["webpackChunkvnm_static_h5"]||[]).push([[5602],{35602:(e,n,t)=>{t.r(n),t.d(n,{default:()=>Y});var a=t(7454),o=t.n(a),u=t(57008),l=t.n(u),i=t(8445),c=t.n(i),s=t(45254),r=t.n(s),d=t(61758),p=t(58790),v=t(38734),f=t(85798),y=t.n(f),b=t(15868),h=t(88122),m=t(43710),k=t(34127),q=t(98006),g=function(e){return(0,d.Qi)("data-v-2be1ea8a"),e=e(),(0,d.jt)(),e},x={class:"account-box account-contents"},C={class:"account-content mail mail-content"},w={class:"q-ma-md",key:"quiz",name:"quiz",label:"有奖问答"},V={key:0,class:"quiz-disable"},R={key:1,class:"quiz-container"},E={class:"quiz-content"},_=g((function(){return(0,d.Lk)("div",{class:"content-title"},"让我们聆听您的心声",-1)})),A=g((function(){return(0,d.Lk)("div",{class:"content-desc"},"雷火有奖问卷调查，您的意见和建议对我们非常重要",-1)})),B={class:"content-btn"},F={key:2,class:"questions-container"},Q={key:0,class:"questions-content"},L={class:"questions-title"},X={class:"answer-container"},K={key:2},S={key:3},z={key:4},I={key:1,class:"questions-content"},j=(0,d.Fv)('<div class="thumbs-up-div" data-v-2be1ea8a><img src="'+y()+'" data-v-2be1ea8a></div><div class="header-title-div" data-v-2be1ea8a><span class="span1" data-v-2be1ea8a>恭喜您完成本月的调查问卷</span><span class="span2" data-v-2be1ea8a>下月问卷将于次月1号重新开启</span></div><div class="header-title-div" style="margin-top:25px;" data-v-2be1ea8a><span class="span3" data-v-2be1ea8a> 此次问卷提供 <span class="span1" style="color:#468cff;" data-v-2be1ea8a>18-188元</span> 建议金 </span></div>',3),U={class:"qr-code-div"},W={class:"url-div"};const T={__name:"FeedbackView",setup:function(e){t(54760);var n=(0,m.A)(),a=(0,b.Z)(),u=(0,v.Kh)({size:0,current:0,total:0,pages:0}),i=(0,v.Kh)({startAnswerBox:!0,questionBox:!1,showQuestions:!0});function s(){i.startAnswerBox=!1,i.questionBox=!0,u.current=1}var f=(0,v.KR)([]),y=(0,v.KR)([]),g=(0,v.KR)(),T=function(){g.value="https://"+location.hostname+"/account/feedback"},M=(0,v.KR)("复制"),O=function(e){var n=null;n=g.value;var t=document.createElement("textarea");t.value=n,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),M.value="已复制",setTimeout((function(){M.value="复制"}),2e3)},H=function(){h.eventapi.get("/questionnaire/list").then((function(e){0===e.code&&(f.value=e.data,u.pages=e.data.length,i.showQuestions=0!==f.value.length)}))},N=(0,v.KR)(""),J=(0,v.Kh)([]),P=(0,v.Kh)([]),Z=function(e,n){var t=N.value,a={question:e.question,choice:t||n};J[e.sequence-1]=a;var o={sequence:e.sequence,question:e.question,choice:n,input:t};P[e.sequence-1]=o},D=function(e,n,t,a){var o,u=N.value,l=Array.from((null===(o=J[e.sequence-1])||void 0===o?void 0:o.choice)||[]),i=[].concat(l,[n]).filter((function(e){return t?e:e!==n})),c={question:e.question,choice:i};J[e.sequence-1]=c;var s={sequence:e.sequence,question:e.question,choice:i,input:u,needSpecify:a,isMultiple:!0};P[e.sequence-1]=s},G=function(){var e=r()(o()().mark((function e(t){var i,s,r,d,p,v,b,h;return o()().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!==y.value||"next"!==t&&"final"!==t){e.next=2;break}return e.abrupt("return",n.notify({color:"negative",position:"top",message:"请选择一个选项",icon:"report_problem"}));case 2:if(y.value=[],N.value=null,i=document.getElementById("prevBtn"),s=document.getElementById("nextBtn"),r=document.getElementById("finalBtn"),"prev"===t&&(u.current=u.current-1),"next"===t&&(u.current=u.current+1),u.current<u.pages&&(i.style.display="block",s.style.display="block",r.style.display="none",1===u.current&&(i.style.display="none",r.style.display="none",s.style.display="block")),u.current>u.pages&&(i.style.display="block",s.style.display="block",r.style.display="none"),u.current===u.pages&&(i.style.display="block",s.style.display="none",r.style.display="block"),P.forEach((function(e){if(e.sequence===u.current){var n=f.value[Number(e.sequence)-1].choices,t=function(){if(e.isMultiple){var t=e.choice.map((function(e){return n.findIndex((function(n){var t=n.choice;return t===e}))})),a=n.findIndex((function(e){return e.needSpecify}));return e.input?[a].concat(c()(t)):t}return n.findIndex((function(n){return n.choice===e.choice}))}();y.value=t,N.value=e.input?e.input:""}})),"final"!==t){e.next=30;break}return d=Array.from(J).map((function(e){return l()(l()({},e),{},{choice:Array.isArray(e.choice)?e.choice.join(","):e.choice})})),p=Object.values({0:"https://prl56hnegv.c70mr4ce2a.com",1:"https://prgqlfcbgv.xn2uluqjh2.com"}),v=p[(0,k.hS)(0,p.length)],e.prev=17,e.next=20,fetch("".concat(v,"/questionnaire/submit"),{method:"POST",body:JSON.stringify(d),headers:{token:"".concat(a.token),"Content-Type":"application/json"}});case 20:return b=e.sent,e.next=23,b.json();case 23:h=e.sent,0===h.code?(Y.value=!0,n.notify({type:"positive",position:"top",message:"提交成功",icon:"report_problem"})):n.notify({type:"negative",position:"top",message:h.message,icon:"report_problem"}),e.next=30;break;case 27:e.prev=27,e.t0=e["catch"](17),console.error(e.t0);case 30:case"end":return e.stop()}}),e,null,[[17,27]])})));return function(n){return e.apply(this,arguments)}}(),Y=((0,v.KR)("Http://LHe63851/s?eric123"),(0,v.KR)(!1)),$=function(){h.eventapi.get("/questionnaire/answers").then((function(e){0===e.code&&(e.data&&0===e.data.length?H():(i.questionBox=!0,Y.value=!0))}))};return(0,d.sV)((function(){a.hasToken()&&($(),T())})),function(e,n){var t=(0,d.g2)("q-btn"),a=(0,d.g2)("q-checkbox"),o=(0,d.g2)("q-radio"),l=(0,d.g2)("q-input"),c=(0,d.g2)("q-form");return(0,d.uX)(),(0,d.CE)("div",x,[(0,d.Lk)("div",C,[(0,d.Lk)("div",w,[i.showQuestions?(0,d.Q3)("",!0):((0,d.uX)(),(0,d.CE)("div",V,"活动尚未开启")),!i.questionBox&&i.showQuestions?((0,d.uX)(),(0,d.CE)("div",R,[(0,d.Lk)("div",E,[_,A,(0,d.Lk)("div",B,[(0,d.bF)(t,{color:"brightbtn",onClick:n[0]||(n[0]=function(e){return s()})},{default:(0,d.k6)((function(){return[(0,d.eW)("开始答题")]})),_:1})])])])):(0,d.Q3)("",!0),i.questionBox?((0,d.uX)(),(0,d.CE)("div",F,[Y.value?(0,d.Q3)("",!0):((0,d.uX)(),(0,d.CE)("div",Q,[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(f.value,(function(e,t){return(0,d.uX)(),(0,d.CE)("div",{key:t,class:"question-title-container"},[u.current===e.sequence?((0,d.uX)(),(0,d.CE)(d.FK,{key:0},[(0,d.Lk)("div",L,(0,p.v_)(e.question),1),(0,d.Lk)("div",X,[(0,d.bF)(c,null,{default:(0,d.k6)((function(){return[((0,d.uX)(!0),(0,d.CE)(d.FK,null,(0,d.pI)(e.choices,(function(t,u){return(0,d.uX)(),(0,d.CE)("span",{key:u},[e.isMultiple?((0,d.uX)(),(0,d.Wv)(a,{key:0,modelValue:(0,v.R1)(y),"onUpdate:modelValue":[n[1]||(n[1]=function(e){return(0,v.i9)(y)?y.value=e:y=e}),function(n){D(e,t.needSpecify?N.value:t.choice,n.includes(u),t.needSpecify)}],val:u,label:t.choice},null,8,["modelValue","val","label","onUpdate:modelValue"])):((0,d.uX)(),(0,d.Wv)(o,{key:1,onClick:function(n){return Z(e,t.choice)},name:"optionModal",modelValue:(0,v.R1)(y),"onUpdate:modelValue":n[2]||(n[2]=function(e){return(0,v.i9)(y)?y.value=e:y=e}),val:u,label:t.choice},null,8,["onClick","modelValue","val","label"])),e.isMultiple&&Array.isArray((0,v.R1)(y))&&Array.from((0,v.R1)(y)).includes(u)&&t.needSpecify?((0,d.uX)(),(0,d.CE)("div",K,[(0,d.bF)(l,{class:"answer-input-fill",modelValue:N.value,"onUpdate:modelValue":n[3]||(n[3]=function(e){return N.value=e}),placeholder:"请输入",type:"textarea",autosize:{minRows:4},onChange:function(n){D(e,n,!0,t.needSpecify)}},null,8,["modelValue","onChange"])])):(0,v.R1)(y)===u&&t.needSpecify&&0!==(0,v.R1)(y)?((0,d.uX)(),(0,d.CE)("div",S,[(0,d.bF)(l,{class:"answer-input-fill",modelValue:N.value,"onUpdate:modelValue":n[4]||(n[4]=function(e){return N.value=e}),placeholder:"请输入",type:"textarea",autosize:{minRows:4},onChange:function(n){return Z(e,t.choice)}},null,8,["modelValue","onChange"])])):(0,v.R1)(y)===u&&t.needSpecify&&0===(0,v.R1)(y)?((0,d.uX)(),(0,d.CE)("div",z,[(0,d.bF)(l,{class:"answer-input-fill",modelValue:N.value,"onUpdate:modelValue":n[5]||(n[5]=function(e){return N.value=e}),placeholder:"十五字或以上",type:"textarea",rules:[function(e){return e&&e.length>=15||"请输入十五字或以上"}],autosize:{minRows:4},onChange:function(n){return Z(e,t.choice)}},null,8,["modelValue","rules","onChange"])])):(0,d.Q3)("",!0)])})),128))]})),_:2},1024)])],64)):(0,d.Q3)("",!0)])})),128)),(0,d.Lk)("div",{class:(0,p.C4)("content-btn ".concat(1===u.current?"active":"")),style:{display:"flex","justify-content":"space-between",gap:"10px"}},[(0,d.Lk)("div",null,[(0,d.bF)(t,{color:"brightbtn",id:"prevBtn",class:"standard-button btn-color-blue",onClick:n[6]||(n[6]=function(e){return G("prev")}),style:{display:"none"}},{default:(0,d.k6)((function(){return[(0,d.eW)(" 上一题 ")]})),_:1})]),(0,d.Lk)("div",null,[(0,d.bF)(t,{color:"brightbtn",id:"nextBtn",class:"standard-button btn-color-blue",onClick:n[7]||(n[7]=function(e){return G("next")})},{default:(0,d.k6)((function(){return[(0,d.eW)(" 下一题 ")]})),_:1})]),(0,d.Lk)("div",null,[(0,d.bF)(t,{color:"brightbtn",id:"finalBtn",class:"standard-button btn-color-blue",onClick:n[8]||(n[8]=function(e){return G("final")}),style:{display:"none"}},{default:(0,d.k6)((function(){return[(0,d.eW)(" 完成 ")]})),_:1})])],2)])),Y.value?((0,d.uX)(),(0,d.CE)("div",I,[j,(0,d.Lk)("div",U,[(0,d.bF)((0,v.R1)(q.A),{size:188,text:g.value},null,8,["text"])]),(0,d.Lk)("div",W,[(0,d.bF)(l,{class:"url-input-fill",modelValue:g.value,"onUpdate:modelValue":n[9]||(n[9]=function(e){return g.value=e}),readonly:!0,type:"url"},null,8,["modelValue"]),(0,d.Lk)("div",null,[(0,d.bF)(t,{color:"brightbtn",style:{width:"100px"},onClick:n[10]||(n[10]=function(e){return O()})},{default:(0,d.k6)((function(){return[(0,d.eW)((0,p.v_)(M.value),1)]})),_:1})])])])):(0,d.Q3)("",!0)])):(0,d.Q3)("",!0)])])])}}};var M=t(12807),O=t(69001),H=t(21565),N=t(12225),J=t(36883),P=t(68926),Z=t(98582),D=t.n(Z);const G=(0,M.A)(T,[["__scopeId","data-v-2be1ea8a"]]),Y=G;D()(T,"components",{QBtn:O.A,QForm:H.A,QCheckbox:N.A,QRadio:J.A,QInput:P.A})}}]);