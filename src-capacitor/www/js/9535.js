"use strict";(globalThis["webpackChunkvnm_static_h5"]=globalThis["webpackChunkvnm_static_h5"]||[]).push([[9535],{99535:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ke});var r=t(61758),a=t(58790),l=t(29104),o=t(25817),i=t.n(o),u=t(31883),s=t.n(u),d=t(60668),c=t.n(d),g=t(63765),m=t.n(g),f=t(50378),p=t.n(f),h={class:"login-container"},_={class:"login-form-container"},v=(0,r.Lk)("em",null,"*",-1),b=(0,r.Lk)("img",{src:i(),width:"24"},null,-1),w=(0,r.Lk)("em",null,"*",-1),k=(0,r.Lk)("img",{src:s(),width:"24"},null,-1),C={key:0,class:"password-str-div"},F=(0,r.Lk)("em",null,"*",-1),R=(0,r.Lk)("img",{src:s(),width:"24"},null,-1),$=(0,r.Lk)("em",null,"*",-1),y=(0,r.Lk)("img",{src:i(),width:"24"},null,-1),V={class:"q-mb-md",style:{"font-size":"11px",color:"#cccccc"}},L=(0,r.Lk)("em",null,"*",-1),A=(0,r.Lk)("div",{style:{width:"24px",display:"flex","align-items":"center"}},[(0,r.Lk)("img",{src:c(),width:"18"})],-1),q=(0,r.Lk)("em",null,"*",-1),E=(0,r.Lk)("div",{style:{width:"24px",display:"flex","align-items":"center"}},[(0,r.Lk)("img",{src:m(),width:"27"})],-1),I=(0,r.Lk)("em",null,"*",-1),S=["src"],x=(0,r.Lk)("img",{src:p(),width:"24"},null,-1),K=(0,r.Lk)("img",{src:p(),width:"24"},null,-1),P={class:"row justify-between items-center"},D={class:"text-center q-mt-md q-pb-xs"},N={style:{"white-space":"nowrap"}},W={class:"text-center q-mt-md q-pb-lg"},z={class:"q-px-lg q-pt-sm q-pb-lg"},Q=["src"];function U(e,n,t,o,i,u){var s=(0,r.g2)("q-label"),d=(0,r.g2)("q-input"),c=(0,r.g2)("q-icon"),g=(0,r.g2)("q-btn"),m=(0,r.g2)("q-form"),f=(0,r.g2)("router-link"),p=(0,r.g2)("q-toolbar-title"),U=(0,r.g2)("q-toolbar"),O=(0,r.g2)("q-card-section"),Z=(0,r.g2)("q-card"),T=(0,r.g2)("q-dialog"),H=(0,r.gN)("close-popup");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",h,[(0,r.bF)(m,{class:"rounded-borders",onSubmit:e.onSubmit},{default:(0,r.k6)((function(){return[(0,r.Lk)("div",_,[(0,r.bF)(s,null,{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(e.$t("lang.username"))+" ",1),v]})),_:1}),(0,r.bF)(d,{ref:"loginNameRef",rounded:"",standout:"",clearable:"",modelValue:e.regForm.loginName,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.regForm.loginName=n}),placeholder:e.$t("lang.username"),rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_username")},function(n){return n&&n.length>=6&&n.length<=11||e.$t("lang.length_between_6_11")},function(n){return/^[a-zA-Z0-9]*$/.test(n)||e.$t("lang.no_special_characters")}],color:"white"},{prepend:(0,r.k6)((function(){return[b]})),_:1},8,["modelValue","placeholder","rules"]),(0,r.bF)(s,null,{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(e.$t("lang.password"))+" ",1),w]})),_:1}),(0,r.bF)(d,{ref:"pwdRef",rounded:"",standout:"",modelValue:e.regForm.password,"onUpdate:modelValue":n[2]||(n[2]=function(n){return e.regForm.password=n}),placeholder:e.$t("lang.password"),"lazy-rules":"",type:e.isPwd?"password":"text",rules:[function(n){return n&&n.length>0||e.$t("lang.please_type_the_password")},function(n){return n.length>=6&&n.length<=11||e.$t("lang.length_between_6_11")}],color:"white"},{prepend:(0,r.k6)((function(){return[k]})),append:(0,r.k6)((function(){return[(0,r.bF)(c,{color:"dark",name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:n[1]||(n[1]=function(n){return e.isPwd=!e.isPwd})},null,8,["name"])]})),_:1},8,["modelValue","placeholder","type","rules"]),e.regForm.password?((0,r.uX)(),(0,r.CE)("div",C,[(0,r.Lk)("span",{class:(0,a.C4)({"weak-pwd":"weak"==e.pwdStrength,"normal-pwd":"normal"==e.pwdStrength,"strong-pwd":"strong"==e.pwdStrength})},(0,a.v_)(e.$t("lang.password_weak")),3),(0,r.Lk)("span",{class:(0,a.C4)({"normal-pwd":"normal"==e.pwdStrength,"strong-pwd":"strong"==e.pwdStrength})},(0,a.v_)(e.$t("lang.password_good")),3),(0,r.Lk)("span",{class:(0,a.C4)({"strong-pwd":"strong"==e.pwdStrength})},(0,a.v_)(e.$t("lang.password_strong")),3)])):(0,r.Q3)("",!0),(0,r.bF)(s,null,{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(e.$t("lang.confirm_password"))+" ",1),F]})),_:1}),(0,r.bF)(d,{ref:"confirmPwdRef",rounded:"",standout:"",type:e.isCfmPwd?"password":"text",modelValue:e.regForm.confirmPwd,"onUpdate:modelValue":n[4]||(n[4]=function(n){return e.regForm.confirmPwd=n}),placeholder:e.$t("lang.confirm_password"),"lazy-rules":"",rules:[function(n){return n&&n.length>0||e.$t("lang.please_type_the_confirm_password")},function(n){return n===e.regForm.password||e.$t("lang.password_not_same")},function(n){return n.length>=6&&n.length<=11||e.$t("lang.length_between_6_11")}],color:"white"},{prepend:(0,r.k6)((function(){return[R]})),append:(0,r.k6)((function(){return[(0,r.bF)(c,{color:"dark",name:e.isCfmPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:n[3]||(n[3]=function(n){return e.isCfmPwd=!e.isCfmPwd})},null,8,["name"])]})),_:1},8,["type","modelValue","placeholder","rules"]),(0,r.bF)(s,null,{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(e.$t("lang.real_name"))+" ",1),$]})),_:1}),(0,r.bF)(d,{ref:"realNameRef",rounded:"",standout:"",clearable:"",modelValue:e.regForm.realName,"onUpdate:modelValue":n[5]||(n[5]=function(n){return e.regForm.realName=n}),placeholder:e.$t("lang.real_name"),"lazy-rules":"",rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_your_real_name")},function(n){return n&&n.length>=2||e.$t("lang.real_name_validation")},function(n){return e.isValidRealName(n)}],color:"white"},{prepend:(0,r.k6)((function(){return[y]})),_:1},8,["modelValue","placeholder","rules"]),(0,r.Lk)("div",V,(0,a.v_)(e.$t("lang.real_name_hints")),1),(0,r.bF)(s,null,{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(e.$t("lang.mobile_number"))+" ",1),L]})),_:1}),(0,r.bF)(d,{ref:"telRef",standout:"",rounded:"",modelValue:e.regForm.telephone,"onUpdate:modelValue":n[6]||(n[6]=function(n){return e.regForm.telephone=n}),placeholder:e.$t("lang.mobile_number"),maxlength:"11",clearable:"",type:"number",rules:[function(n){return n&&n.length>7||e.$t("lang.mobile_number_valid")}],color:"white"},{prepend:(0,r.k6)((function(){return[A]})),_:1},8,["modelValue","placeholder","rules"]),(0,r.bF)(s,null,{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(e.$t("lang.email"))+" ",1),q]})),_:1}),(0,r.bF)(d,{ref:"emailRef",standout:"",rounded:"",type:"email",modelValue:e.regForm.email,"onUpdate:modelValue":n[7]||(n[7]=function(n){return e.regForm.email=n}),placeholder:e.$t("lang.email"),"lazy-rules":"",rules:[function(n){return n&&n.length>0||e.$t("lang.email_valid")},e.isValidEmail],color:"white"},{prepend:(0,r.k6)((function(){return[E]})),_:1},8,["modelValue","placeholder","rules"]),(0,r.bF)(s,null,{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(e.$t("lang.verification_code"))+" ",1),I]})),_:1}),(0,r.bF)(d,{ref:"verificationRef",rounded:"",standout:"",clearable:"",type:"text",modelValue:e.regForm.captchaCode,"onUpdate:modelValue":n[9]||(n[9]=function(n){return e.regForm.captchaCode=n}),placeholder:e.$t("lang.verification_code"),"lazy-rules":"",color:"white",rules:[function(n){return n&&n.length>0||e.$t("lang.please_enter_verification_code")},function(n){return n&&n.length>3&&n.length<5||e.$t("lang.length_is_4")}]},{append:(0,r.k6)((function(){return[(0,r.Lk)("img",{class:"veri-img",src:e.verificationImg,onClick:n[8]||(n[8]=function(n){return e.getCode()})},null,8,S)]})),prepend:(0,r.k6)((function(){return[x]})),_:1},8,["modelValue","placeholder","rules"]),(0,r.bF)(s,null,{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(e.$t("lang.referral_code")),1)]})),_:1}),e.hasAffiliate?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(d,{key:1,ref:"affiliateCodeRef",rounded:"",standout:"",clearable:"",modelValue:e.regForm.referrer,"onUpdate:modelValue":n[10]||(n[10]=function(n){return e.regForm.referrer=n}),hint:e.$t("lang.referral_hints"),placeholder:e.$t("lang.referral_code")},{prepend:(0,r.k6)((function(){return[K]})),_:1},8,["modelValue","hint","placeholder"])),(0,r.Lk)("div",P,[(0,r.bF)(g,{onClick:(0,l.D$)(e.onSubmit,["prevent"]),type:"submit",class:"q-mt-lg common-large-btn",label:e.$t("lang.register_btn"),"no-caps":"",width:"100%",color:"brightbtn",style:{width:"100%"},rounded:""},null,8,["onClick","label"])]),(0,r.Lk)("div",D,[(0,r.eW)((0,a.v_)(e.$t("lang.registration_hints"))+" ",1),(0,r.Lk)("div",N,(0,a.v_)(e.$t("lang.user_registration_protocol")),1)])])]})),_:1},8,["onSubmit"]),(0,r.Lk)("div",W,[(0,r.eW)((0,a.v_)(e.$t("lang.already_have_acc"))+" ",1),(0,r.bF)(f,{to:"/login"},{default:(0,r.k6)((function(){return[(0,r.eW)((0,a.v_)(e.$t("lang.login_here")),1)]})),_:1})])]),(0,r.bF)(T,{modelValue:e.showCaptchaDialog,"onUpdate:modelValue":n[13]||(n[13]=function(n){return e.showCaptchaDialog=n}),width:"100%","no-backdrop-dismiss":"","no-esc-dismiss":""},{default:(0,r.k6)((function(){return[(0,r.bF)(Z,{width:"100%"},{default:(0,r.k6)((function(){return[(0,r.bF)(O,{class:"q-pa-md bg-brightbtn text-white"},{default:(0,r.k6)((function(){return[(0,r.bF)(U,null,{default:(0,r.k6)((function(){return[(0,r.bF)(p,null,{default:(0,r.k6)((function(){return[(0,r.eW)("验证码")]})),_:1}),(0,r.bo)((0,r.bF)(g,{flat:"",round:"",dense:"",icon:"close"},null,512),[[H]])]})),_:1})]})),_:1}),(0,r.Lk)("div",z,[(0,r.bF)(O,{class:"q-mb-md q-pa-md"},{default:(0,r.k6)((function(){return[(0,r.bF)(d,{modelValue:e.innerCaptchaRef,"onUpdate:modelValue":n[12]||(n[12]=function(n){return e.innerCaptchaRef=n}),placeholder:"验证码"},{append:(0,r.k6)((function(){return[(0,r.Lk)("img",{src:e.phoneVerificationImg,title:"点击刷新验证码",style:{"margin-top":"6px",cursor:"pointer"},onClick:n[11]||(n[11]=function(){return e.getInnerCode&&e.getInnerCode.apply(e,arguments)})},null,8,Q)]})),_:1},8,["modelValue"])]})),_:1}),(0,r.bF)(g,{onClick:e.onCaptchaSubmit,label:"发送验证码",color:"brightbtn"},null,8,["onClick"])])]})),_:1})]})),_:1},8,["modelValue"])],64)}var O=t(7454),Z=t.n(O),T=t(57008),H=t.n(T),B=t(45254),X=t.n(B),j=t(38734),M=t(88122),G=t(43710),J=t(72012),Y=t(60455),ee=t(7397),ne=t(15868),te=t(54760),re=t.n(te),ae=t(23537);const le=(0,r.pM)({name:"RegisterPage",setup:function(){(0,r.sV)((function(){h(),p()})),(0,r.n)((function(){g()}));var e=(0,ae.s9)(),n=e.t,a=(0,ne.Z)(),l=(0,j.KR)(""),o=function(){var e=/^([\u4e00-\u9fa5\.。]*)$/;return e.test(c.realName)||"请输入中文字符"},i=((0,j.KR)(),(0,j.KR)("")),u=(0,j.KR)(""),s=(0,j.KR)(!1),d=(0,j.KR)(""),c=(0,j.Kh)({loginName:"",password:"",confirmPwd:"",telephone:"",captchaCode:"",regHost:location.hostname,codeId:"",codeAffiliate:"",referrer:"",smsCodeId:"",smsCode:""}),g=function(){M.api.get("/member/verificationCode").then((function(e){0===e.code&&(l.value="data:image/png;base64,"+e.data.img,c.codeId=e.data.id,c.captchaCode="",k.value.resetValidation())}))["catch"]((function(e){console.log(e)}))},m=function(){M.api.get("/member/verificationCode").then((function(e){0===e.code&&(d.value="data:image/png;base64,"+e.data.img,i.value=e.data.id,u.value="")}))["catch"]((function(e){console.log(e)}))},f=(0,j.KR)(!1),p=function(){var e=sessionStorage.getItem("AFFILIATE_CODE");e&&(f.value=!0,c.codeAffiliate=e)},h=function(){var e=sessionStorage.getItem("REFERRAL_CODE");e&&(f.value=!0,c.referrer=e)},_=(0,j.KR)(),v=(0,j.KR)(),b=(0,j.KR)(),w=(0,j.KR)(),k=(0,j.KR)(),C=(0,j.KR)(),F=(0,j.KR)(),R=(0,G.A)(),$=((0,Y.lq)(),(0,j.KR)("")),y=function(){var e=/^(?=[a-zA-Z0-9@._%+-]{6,254}$)[a-zA-Z0-9._%+-]{1,64}@(?:[a-zA-Z0-9-]{1,63}\.){1,8}[a-zA-Z]{2,63}$/;return e.test(c.email)||n("lang.email_valid")},V=function(){var e=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/;return e.test(c.telephone)||"请输入有效的电话号码"},L=function(e){var t=/^[a-zA-Z\s]+$/;return t.test(c.realName)||n("lang.personal_realname_valid")},A=(0,Y.rd)(),q=function(){if(_.value.validate(),v.value.validate(),b.value.validate(),k.value.validate(),R.loading.show({message:"注册中"}),_.value.hasError||v.value.hasError||b.value.hasError||k.value.hasError)R.loading.hide();else{var e=t(54760),r=ee.Ay.load();X()(Z()().mark((function t(){var l,o,i,u,s;return Z()().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r;case 2:return l=t.sent,t.next=5,l.get();case 5:o=t.sent,i={value:["timezone","timeZoneOffset"]},u=H()({},o.components),i.value.forEach((function(e){delete u[e]})),s=ee.Ay.hashComponents(u),c.sid=s,c.regDevice=R.platform.is.mobile?"H5":"WEB","standalone"in window.navigator&&window.navigator.standalone?c.regDevice="IOS":(c.regDevice=J.Ay.is.mobile?"H5":"WEB",J.Ay.is.capacitor&&J.Ay.is.android&&(c.regDevice="ANDROID")),c.regHost.indexOf("http://localhost")>-1&&(c.regHost="app://"),M.api.post("/member/fbRegister",e.stringify(c)).then((function(e){var t=e;0===t.code?(R.notify({color:"positive",position:"top",message:n("lang.register_successful"),icon:"check_circle_outline"}),a.autoLogin(t.data),sessionStorage.removeItem("REFERRAL_CODE"),a.hasToken()&&A.go("/"),sessionStorage.removeItem("REFERRAL_CODE")):R.notify({color:"negative",position:"top",message:t.message,icon:"report_problem"}),R.loading.hide()}))["catch"]((function(e){R.loading.hide()})),g();case 16:case"end":return t.stop()}}),t)})))()}};(0,r.wB)((function(){return c.password}),(function(){$.value="";for(var e=c.password,n=0,t=0,r=e.length;t<r;++t)n|=oe(e.charCodeAt(t));var a=0;for(t=0;t<=4;t++)1&n&&a++,n>>>=1;if(e.length>=6)switch(a){case 1:$.value="weak";break;case 2:$.value="normal";break;case 3:case 4:$.value="strong";break}else $.value="weak"}));var E=function(){telRef.value.validate(),telRef.value.hasError||(s.value=!0,m())},I=function(){if(!c.telephone)return R.notify({color:"negative",position:"top",message:"手机号码不能为空",icon:"report_problem"}),void m();M.api.post("/otp/sendSms",re().stringify({telephone:c.telephone,captchaCode:u.value,codeId:i.value})).then((function(e){var n=e.message||"发送手机验证码成功",t="positive";0===e.code?(s.value=!1,c.smsCode="",c.smsCodeId=e.data.codeId):(t="negative",m()),n&&R.notify({message:n,color:t})}))["catch"]((function(){m()}))};return{header:"注册账号",regForm:c,verificationImg:l,loginNameRef:_,pwdRef:v,confirmPwdRef:b,emailRef:w,verificationRef:k,affiliateCodeRef:C,onSubmit:q,isValidEmail:y,isPwd:(0,j.KR)(!0),isCfmPwd:(0,j.KR)(!0),getCode:g,getInnerCode:m,pwdStrength:$,isValidName:o,showCaptchaDialog:s,onCaptchaSubmit:I,innerCaptchaRef:u,isValidRealName:L,phoneVerificationImg:d,openPhoneVeriDialog:E,phoneVerificationRef:F,isValidCnPhone:V,hasAffiliate:f}}});function oe(e){return e>=48&&e<=57?1:e>=97&&e<=122?2:e>=65&&e<=90?4:8}var ie=t(12807),ue=t(21565),se=t(68926),de=t(24609),ce=t(69001),ge=t(57201),me=t(97569),fe=t(27066),pe=t(79351),he=t(56769),_e=t(79197),ve=t(98582),be=t.n(ve);const we=(0,ie.A)(le,[["render",U]]),ke=we;be()(le,"components",{QForm:ue.A,QInput:se.A,QIcon:de.A,QBtn:ce.A,QDialog:ge.A,QCard:me.A,QCardSection:fe.A,QToolbar:pe.A,QToolbarTitle:he.A}),be()(le,"directives",{ClosePopup:_e.A})}}]);