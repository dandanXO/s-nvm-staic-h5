"use strict";(globalThis["webpackChunkvnm_static_h5"]=globalThis["webpackChunkvnm_static_h5"]||[]).push([[7226],{53526:(e,a,o)=>{o.r(a),o.d(a,{default:()=>M});var l=o(61758),n={class:"table-record"};function t(e,a,o,t,r,s){var d=(0,l.g2)("RecordComponent");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.bF)(d,{recordType:"promo",loading:e.visible,list:e.tableData,headers:e.tableHeaders,onLoadnewdata:e.loadNewData,isEnded:e.isEnded},null,8,["loading","list","headers","onLoadnewdata","isEnded"])])}var r=o(8445),s=o.n(r),d=(o(10239),o(38734)),i=o(41900),c=o(88122),u=o(85038),v=o.n(u),m=o(70880),g=o(23537);const p=(0,l.pM)({name:"PromoRecordView",components:{RecordComponent:i.A},setup:function(){var e=(0,g.s9)(),a=e.t,o=(0,d.KR)(!0),n=(0,d.KR)([]),t="/session/member/privilege",r=(0,d.KR)(!1),i=v()().format("YYYY-MM-DD"),u=v()().add(-7,"days").format("YYYY-MM-DD"),p=(0,d.KR)(1),Y=(0,d.KR)(0),b=function(){if(Y.value>p.value)p.value++;else if(p.value=1,i=v()(u).add(-1,"days").format("YYYY-MM-DD"),console.log(i),u=v()(i).add(-7,"days").format("YYYY-MM-DD"),console.log(u),i<=v()().add(-29,"days").format("YYYY-MM-DD"))return console.log("mor than 3 months"),void(r.value=!0);f(!1)},f=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(o.value=!0),console.log(u),console.log(i);var a={startDate:u,endDate:i,size:10,current:p.value},l=t+"_"+u+"_"+i+"_"+p.value;console.log(l),m.cached.get(l,(function(){return c.api.get(t,{params:a})}),{expired_value:30}).then((function(a){var l;console.log(a),Y.value=a.pages,e&&(o.value=!1),(l=n.value).push.apply(l,s()(a.records))}))["catch"]((function(a){e&&(o.value=!1)}))},h=[{key:"serialNumber",label:a("lang.col_serialnumber")},{key:"privilegeName",label:a("lang.col_privilegename")},{key:"amount",label:a("lang.col_amount")},{key:"recordTime",label:a("lang.col_datetime")}];return(0,l.sV)((function(){p.value=1,f()})),{tableData:n,visible:o,tableHeaders:h,loadNewData:b,isEnded:r}}});var Y=o(12807),b=o(97569),f=o(69001),h=o(98582),D=o.n(h);const _=(0,Y.A)(p,[["render",t]]),M=_;D()(p,"components",{QCard:b.A,QBtn:f.A})}}]);